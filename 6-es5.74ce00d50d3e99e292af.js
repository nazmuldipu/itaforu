!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function i(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"O+Ta":function(t,n,r){"use strict";r.r(n),r.d(n,"ROUTES",(function(){return rt})),r.d(n,"DashboardModule",(function(){return ot}));var o,a=r("tyNb"),s=r("KZX/"),c=r("fXoL"),u=((o=function(){function t(){e(this,t)}return i(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(e){return new(e||o)},o.\u0275cmp=c.Gb({type:o,selectors:[["app-index"]],decls:2,vars:0,template:function(e,t){1&e&&(c.Rb(0,"p"),c.xc(1," index works!\n"),c.Qb())},styles:[""]}),o),l=r("mrSG"),f=r("ba1W"),d=r("z3bE"),g=r("ofXK"),b=r("3Pt+"),h=function(e){return e.COMMON_TOUR="Common Package",e.INTERNATIONAL="International Package",e.NATIONAL="National",e}({}),m=r("1kSV");function p(e,t){if(1&e&&(c.Rb(0,"div",5),c.Nb(1,"input",16),c.Qb()),2&e){var n=t.index;c.zb(1),c.lc("placeholder","Point ",n+1,""),c.jc("formControlName",n)}}function A(e,t){if(1&e){var n=c.Sb();c.Rb(0,"div",3),c.Rb(1,"div",4),c.Rb(2,"div",5),c.Nb(3,"input",6),c.Qb(),c.Rb(4,"div",5),c.Nb(5,"input",7),c.Qb(),c.Rb(6,"div",8),c.Rb(7,"div",9),c.Rb(8,"div",10),c.Rb(9,"button",11),c.cc("click",(function(){c.rc(n);var e=t.index;return c.ec().addPoints(e)})),c.Nb(10,"i",12),c.Qb(),c.Qb(),c.Rb(11,"div",13),c.vc(12,p,2,2,"div",14),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Rb(13,"button",15),c.cc("click",(function(){c.rc(n);var e=t.index;return c.ec().pullPackagePlans(e)})),c.xc(14," Remove "),c.Qb(),c.Qb()}if(2&e){var i=t.$implicit,r=t.index;c.zb(1),c.jc("formGroupName",r),c.zb(2),c.lc("placeholder","Headline ",r+1,""),c.zb(2),c.lc("placeholder","Description ",r+1,""),c.zb(7),c.jc("ngForOf",i.controls.points.controls)}}var v,y=((v=function(){function t(n,i){e(this,t),this.fb=n,this.differs=i,this.differ=i.find({}).create()}return i(t,[{key:"ngOnChanges",value:function(e){}},{key:"getPackagePlans",value:function(e){return this.parent.get("packagePlans").controls}},{key:"addPoints",value:function(e){this.parent.get("packagePlans").get([e]).get("points").push(new b.e(""))}},{key:"pullPackagePlans",value:function(e){this.parent.get("packagePlans")}},{key:"points",get:function(){return this.parent.get("packagePlans").get("points")}}]),t}()).\u0275fac=function(e){return new(e||v)(c.Mb(b.d),c.Mb(c.t))},v.\u0275cmp=c.Gb({type:v,selectors:[["package-plan-from"]],inputs:{parent:"parent"},features:[c.xb],decls:3,vars:2,consts:[[3,"formGroup"],["formArrayName","packagePlans"],["class","border p-2 my-2",4,"ngFor","ngForOf"],[1,"border","p-2","my-2"],[3,"formGroupName"],[1,"form-group"],["formControlName","head","id","head",1,"form-control",3,"placeholder"],["formControlName","description","id","description",1,"form-control",3,"placeholder"],["formArrayName","points"],[1,"row","my-1"],[1,"col-auto"],["type","button",1,"btn","btn-sm","btn-warning",3,"click"],[1,"fa","fa-plus"],[1,"col","pl-0"],["class","form-group",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-sm","btn-danger",3,"click"],[1,"form-control",3,"formControlName","placeholder"]],template:function(e,t){1&e&&(c.Rb(0,"div",0),c.Rb(1,"div",1),c.vc(2,A,15,4,"div",2),c.Qb(),c.Qb()),2&e&&(c.jc("formGroup",t.parent),c.zb(2),c.jc("ngForOf",t.getPackagePlans(t.parent)))},directives:[b.n,b.g,b.c,g.m,b.h,b.b,b.m,b.f],styles:[".arr-button[_ngcontent-%COMP%]{cursor:pointer;color:#61a4f1!important}"]}),v);function w(e,t){1&e&&(c.Rb(0,"small",73),c.xc(1,"Title required"),c.Qb())}function I(e,t){1&e&&(c.Rb(0,"small",73),c.xc(1,"ShortTag required"),c.Qb())}function Q(e,t){1&e&&(c.Rb(0,"small",73),c.xc(1," Duration required"),c.Qb())}function R(e,t){1&e&&(c.Rb(0,"small",73),c.xc(1," Departure Place required"),c.Qb())}function x(e,t){1&e&&(c.Rb(0,"small",73),c.xc(1," Price required"),c.Qb())}function C(e,t){1&e&&(c.Rb(0,"small",73),c.xc(1," Category required"),c.Qb())}function k(e,t){1&e&&(c.Rb(0,"small",73),c.xc(1,"Description required"),c.Qb())}function E(e,t){if(1&e&&(c.Rb(0,"option",74),c.xc(1),c.Qb()),2&e){var n=t.$implicit;c.jc("value",n.key),c.zb(1),c.zc(" ",n.value," ")}}function B(e,t){1&e&&(c.Rb(0,"small",73),c.xc(1," Place required "),c.Qb())}function S(e,t){if(1&e&&(c.Rb(0,"div",20),c.Nb(1,"input",75),c.Qb()),2&e){var n=t.index;c.zb(1),c.lc("placeholder","Destinations ",n+1,""),c.jc("formControlName",n)}}function D(e,t){if(1&e&&(c.Rb(0,"div",20),c.Nb(1,"input",75),c.Qb()),2&e){var n=t.index;c.zb(1),c.lc("placeholder","Spots ",n+1,""),c.jc("formControlName",n)}}function _(e,t){if(1&e&&(c.Rb(0,"div",20),c.Nb(1,"input",75),c.Qb()),2&e){var n=t.index;c.zb(1),c.lc("placeholder","Includes ",n+1,""),c.jc("formControlName",n)}}function P(e,t){if(1&e&&(c.Rb(0,"div",20),c.Nb(1,"input",75),c.Qb()),2&e){var n=t.index;c.zb(1),c.lc("placeholder","Exclude ",n+1,""),c.jc("formControlName",n)}}var M,N=function(e,t,n){return{disabled:e,"btn-warning":t,"btn-success":n}},O=((M=function(){function t(n,i,r){e(this,t),this.fb=n,this.calendar=i,this.create=new c.n,this.update=new c.n,this.edit=!1,this.packageTypes=h,r.spinners=!1,this.createForm()}return i(t,[{key:"ngOnChanges",value:function(e){var t=this;if(e.package&&this.package&&this.package.id){this.edit=!0;var n=this.package.departureDate.split("-"),i={year:parseInt(n[0]),month:parseInt(n[1]),day:parseInt(n[2])};this.package.departureDate=i,n=this.package.returnDate.split("-"),i={year:parseInt(n[0]),month:parseInt(n[1]),day:parseInt(n[2])},this.package.returnDate=i,n=this.package.lastBookingDate.split("-"),i={year:parseInt(n[0]),month:parseInt(n[1]),day:parseInt(n[2])},this.package.lastBookingDate=i,n=this.package.departureTime.split(":");var r={hour:parseInt(n[0]),minute:parseInt(n[1]),second:0};this.package.departureTime=r,n=this.package.returnTime.split(":"),r={hour:parseInt(n[0]),minute:parseInt(n[1]),second:0},this.package.returnTime=r;var o=this.form.controls.destinations;o.removeAt(0),this.package.destinations.forEach((function(e){e.length>0&&o.push(new b.e(e))})),(o=this.form.controls.include).removeAt(0),this.package.include.forEach((function(e){e.length>0&&o.push(new b.e(e))})),(o=this.form.controls.exclude).removeAt(0),this.package.exclude.forEach((function(e){e.length>0&&o.push(new b.e(e))})),(o=this.form.controls.spots).removeAt(0),this.package.spots.forEach((function(e){e.length>0&&o.push(new b.e(e))})),(o=this.form.get("packagePlans")).removeAt(0),this.package.packagePlans.forEach((function(e){t.form.get("packagePlans"),e.head.length>0&&o.push(t.populatePackagePlans(e.head,e.description,e.points))})),this.form.patchValue(this.package)}}},{key:"createForm",value:function(){this.form=this.fb.group({domestic:[!1],title:["",b.s.required],shortTag:["",b.s.required],departurePlace:["",b.s.required],departureDate:["",b.s.required],departureTime:["",b.s.required],returnDate:["",b.s.required],returnTime:["",b.s.required],duration:["",b.s.required],price:["",b.s.required],place:["",b.s.required],description:["",b.s.required],category:["",b.s.required],lastBookingDate:["",b.s.required],type:["",b.s.required],active:!1,destinations:this.fb.array([""],b.s.required),include:this.fb.array([""],b.s.required),exclude:this.fb.array([""],b.s.required),spots:this.fb.array([""],b.s.required),packagePlans:this.fb.array([this.createPackagePlans()])})}},{key:"pushPackagePlans",value:function(){this.form.get("packagePlans").push(this.createPackagePlans())}},{key:"populatePackagePlans",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""];return this.fb.group({head:e,description:t,points:this.fb.array(n)})}},{key:"createPackagePlans",value:function(){return this.fb.group({head:["",b.s.required],description:["",b.s.required],points:this.fb.array([""])})}},{key:"addDestinations",value:function(){this.form.get("destinations").push(new b.e(""))}},{key:"addInclude",value:function(){this.form.get("include").push(new b.e(""))}},{key:"addExclude",value:function(){this.form.get("exclude").push(new b.e(""))}},{key:"addSpots",value:function(){this.form.get("spots").push(new b.e(""))}},{key:"selectToday",value:function(){this.model=this.calendar.getToday()}},{key:"submit",value:function(){if(this.edit){var e=Object.assign({id:this.package.id,active:this.package.active},this.form.value);this.update.emit(e)}else this.create.emit(this.form.value);this.edit=!1,this.form.reset(),this.createForm()}},{key:"destinations",get:function(){return this.form.get("destinations")}},{key:"include",get:function(){return this.form.get("include")}},{key:"exclude",get:function(){return this.form.get("exclude")}},{key:"spots",get:function(){return this.form.get("spots")}}]),t}()).\u0275fac=function(e){return new(e||M)(c.Mb(b.d),c.Mb(m.a),c.Mb(m.k))},M.\u0275cmp=c.Gb({type:M,selectors:[["packages-form"]],inputs:{package:"package"},outputs:{create:"create",update:"update"},features:[c.xb],decls:160,vars:23,consts:[[1,"container-fluid"],[1,"my-3","p-4","shifting-form","label1","text-left",3,"formGroup","ngSubmit"],[1,"form-group","form-check"],["type","checkbox","id","domestic","formControlName","domestic",1,"form-check-input"],["for","domestic",1,"form-check-label"],[1,"row"],[1,"col"],["for","title"],["formControlName","title","id","title","placeholder","Title",1,"form-control"],["class","text-danger",4,"ngIf"],["for","shortTag"],["formControlName","shortTag","id","shortTag","placeholder","ShortTag",1,"form-control"],["for","duration"],["formControlName","duration","id","duration","placeholder","Duration",1,"form-control"],["for","departurePlace"],["formControlName","departurePlace","id","departurePlace","placeholder","Departure Place",1,"form-control"],["for","price"],["formControlName","price","id","price","type","number","placeholder","Price",1,"form-control"],["for","category"],["formControlName","category","id","category","placeholder","Category",1,"form-control"],[1,"form-group"],["for","description"],["id","description","rows","3","formControlName","description",1,"form-control"],[1,"col-auto"],[1,"form-check","form-check-inline"],["type","checkbox","id","active","formControlName","active",1,"form-check-input"],["for","active",1,"form-check-label"],[1,"input-group"],["placeholder","yyyy-mm-dd","formControlName","departureDate","ngbDatepicker","",1,"form-control",3,"click"],["departureDate","ngbDatepicker"],["for","departureTime"],["formControlName","departureTime"],["for","returnDate"],["placeholder","yyyy-mm-dd","formControlName","returnDate","ngbDatepicker","",1,"form-control",3,"click"],["returnDate","ngbDatepicker"],["for","returnTime"],["formControlName","returnTime"],["for","lastBookingDate"],["placeholder","yyyy-mm-dd","formControlName","lastBookingDate","ngbDatepicker","",1,"form-control",3,"click"],["lastBookingDate","ngbDatepicker"],["id","role","formControlName","type",1,"form-control"],["value","","selected",""],[3,"value",4,"ngFor","ngForOf"],["for","place"],["id","place","formControlName","place",1,"form-control"],["value","COXS BAZAR"],["value","SAINT MARTIN"],["value","BANDARBANS"],["value","RANGAMATI"],["value","SAJEK"],["value","SYLHET"],["value","SUNDARBAN"],["value","COMBINED"],["value","INTERNATIONAL"],[1,"row","my-3"],["for","area"],["formArrayName","destinations"],["class","form-group",4,"ngFor","ngForOf"],[1,"float-right"],["type","button",1,"btn-sm","btn-info",3,"click"],[1,"fa","fa-plus"],["for","spots"],["formArrayName","spots"],["type","button","type","button",1,"btn-sm","btn-info",3,"click"],["for","include"],["formArrayName","include"],["for","exclude"],["formArrayName","exclude"],[1,"col-md-12"],[3,"parent"],["type","button",1,"btn","btn-sm","btn-info",3,"click"],[1,"d-flex","flex-row-reverse","bd-highlight"],["type","submit","type","submit",1,"btn","btn-warning","mx-1",3,"ngClass"],[1,"text-danger"],[3,"value"],[1,"form-control",3,"formControlName","placeholder"]],template:function(e,t){if(1&e){var n=c.Sb();c.Rb(0,"div",0),c.Rb(1,"form",1),c.cc("ngSubmit",(function(){return t.submit()})),c.Rb(2,"div",2),c.Nb(3,"input",3),c.Rb(4,"label",4),c.xc(5,"Domestic"),c.Qb(),c.Qb(),c.Rb(6,"div",5),c.Rb(7,"div",6),c.Rb(8,"label",7),c.xc(9,"Title"),c.Qb(),c.Nb(10,"input",8),c.vc(11,w,2,0,"small",9),c.Qb(),c.Rb(12,"div",6),c.Rb(13,"label",10),c.xc(14,"Short Tag"),c.Qb(),c.Nb(15,"input",11),c.vc(16,I,2,0,"small",9),c.Qb(),c.Qb(),c.Rb(17,"div",5),c.Rb(18,"div",6),c.Rb(19,"label",12),c.xc(20,"Duration"),c.Qb(),c.Nb(21,"input",13),c.vc(22,Q,2,0,"small",9),c.Qb(),c.Rb(23,"div",6),c.Rb(24,"label",14),c.xc(25,"Departure Place"),c.Qb(),c.Nb(26,"input",15),c.vc(27,R,2,0,"small",9),c.Qb(),c.Qb(),c.Rb(28,"div",5),c.Rb(29,"div",6),c.Rb(30,"label",16),c.xc(31,"Price"),c.Qb(),c.Nb(32,"input",17),c.vc(33,x,2,0,"small",9),c.Qb(),c.Rb(34,"div",6),c.Rb(35,"label",18),c.xc(36,"Category"),c.Qb(),c.Nb(37,"input",19),c.vc(38,C,2,0,"small",9),c.Qb(),c.Qb(),c.Rb(39,"div",20),c.Rb(40,"label",21),c.xc(41,"Description"),c.Qb(),c.Nb(42,"textarea",22),c.vc(43,k,2,0,"small",9),c.Qb(),c.Rb(44,"div",5),c.Rb(45,"div",23),c.Rb(46,"div",24),c.Nb(47,"input",25),c.Rb(48,"label",26),c.xc(49,"Active"),c.Qb(),c.Qb(),c.Qb(),c.Rb(50,"div",23),c.Rb(51,"label",14),c.xc(52,"Departure Date"),c.Qb(),c.Rb(53,"div",20),c.Rb(54,"div",27),c.Rb(55,"input",28,29),c.cc("click",(function(){return c.rc(n),c.qc(56).toggle()})),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Rb(57,"div",23),c.Rb(58,"label",30),c.xc(59,"Departure time"),c.Qb(),c.Nb(60,"ngb-timepicker",31),c.Qb(),c.Rb(61,"div",23),c.Rb(62,"label",32),c.xc(63,"Return Date"),c.Qb(),c.Rb(64,"div",20),c.Rb(65,"div",27),c.Rb(66,"input",33,34),c.cc("click",(function(){return c.rc(n),c.qc(67).toggle()})),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Rb(68,"div",23),c.Rb(69,"label",35),c.xc(70,"Return time"),c.Qb(),c.Nb(71,"ngb-timepicker",36),c.Qb(),c.Qb(),c.Rb(72,"div",5),c.Rb(73,"div",23),c.Rb(74,"label",37),c.xc(75,"Last Booking Date"),c.Qb(),c.Rb(76,"div",20),c.Rb(77,"div",27),c.Rb(78,"input",38,39),c.cc("click",(function(){return c.rc(n),c.qc(79).toggle()})),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Rb(80,"div",23),c.Rb(81,"label",14),c.xc(82,"Package Type"),c.Qb(),c.Rb(83,"div",20),c.Rb(84,"select",40),c.Rb(85,"option",41),c.xc(86," N/A "),c.Qb(),c.vc(87,E,2,2,"option",42),c.fc(88,"keyvalue"),c.Qb(),c.Qb(),c.Qb(),c.Rb(89,"div",23),c.Rb(90,"label",43),c.xc(91,"Place"),c.Qb(),c.Rb(92,"select",44),c.Rb(93,"option",41),c.xc(94," N/A "),c.Qb(),c.Rb(95,"option",45),c.xc(96," COXS BAZAR"),c.Qb(),c.Rb(97,"option",46),c.xc(98," SAINT MARTIN "),c.Qb(),c.Rb(99,"option",47),c.xc(100," BANDARBANS "),c.Qb(),c.Rb(101,"option",48),c.xc(102," RANGAMATI "),c.Qb(),c.Rb(103,"option",49),c.xc(104," SAJEK"),c.Qb(),c.Rb(105,"option",50),c.xc(106,"SYLHET"),c.Qb(),c.Rb(107,"option",51),c.xc(108,"SUNDARBAN"),c.Qb(),c.Rb(109,"option",52),c.xc(110,"COMBINED"),c.Qb(),c.Rb(111,"option",53),c.xc(112,"INTERNATIONAL"),c.Qb(),c.Qb(),c.vc(113,B,2,0,"small",9),c.Qb(),c.Qb(),c.Rb(114,"div",54),c.Rb(115,"div",6),c.Rb(116,"label",55),c.xc(117,"Destinations"),c.Qb(),c.Rb(118,"div",56),c.vc(119,S,2,2,"div",57),c.Qb(),c.Rb(120,"small",58),c.Rb(121,"button",59),c.cc("click",(function(){return t.addDestinations()})),c.Nb(122,"i",60),c.xc(123," Add Destinations "),c.Qb(),c.Qb(),c.Qb(),c.Rb(124,"div",6),c.Rb(125,"label",61),c.xc(126,"Spots"),c.Qb(),c.Rb(127,"div",62),c.vc(128,D,2,2,"div",57),c.Qb(),c.Rb(129,"small",58),c.Rb(130,"button",63),c.cc("click",(function(){return t.addSpots()})),c.Nb(131,"i",60),c.xc(132," Add spots "),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Rb(133,"div",54),c.Rb(134,"div",6),c.Rb(135,"label",64),c.xc(136,"Include"),c.Qb(),c.Rb(137,"div",65),c.vc(138,_,2,2,"div",57),c.Qb(),c.Rb(139,"small",58),c.Rb(140,"button",59),c.cc("click",(function(){return t.addInclude()})),c.Nb(141,"i",60),c.xc(142," Add Include "),c.Qb(),c.Qb(),c.Qb(),c.Rb(143,"div",6),c.Rb(144,"label",66),c.xc(145,"Exclude"),c.Qb(),c.Rb(146,"div",67),c.vc(147,P,2,2,"div",57),c.Qb(),c.Rb(148,"small",58),c.Rb(149,"button",63),c.cc("click",(function(){return t.addExclude()})),c.Nb(150,"i",60),c.xc(151," Add Exclude "),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Rb(152,"div",5),c.Rb(153,"div",68),c.Nb(154,"package-plan-from",69),c.Qb(),c.Rb(155,"button",70),c.cc("click",(function(){return t.pushPackagePlans()})),c.xc(156," Add packges plan "),c.Qb(),c.Qb(),c.Rb(157,"div",71),c.Rb(158,"button",72),c.xc(159),c.Qb(),c.Qb(),c.Qb(),c.Qb()}2&e&&(c.zb(1),c.jc("formGroup",t.form),c.zb(10),c.jc("ngIf",(null==t.form.controls.title.errors?null:t.form.controls.title.errors.required)&&t.form.controls.title.dirty),c.zb(5),c.jc("ngIf",(null==t.form.controls.shortTag.errors?null:t.form.controls.shortTag.errors.required)&&t.form.controls.shortTag.dirty),c.zb(6),c.jc("ngIf",(null==t.form.controls.duration.errors?null:t.form.controls.duration.errors.required)&&t.form.controls.duration.dirty),c.zb(5),c.jc("ngIf",(null==t.form.controls.departurePlace.errors?null:t.form.controls.departurePlace.errors.required)&&t.form.controls.departurePlace.dirty),c.zb(6),c.jc("ngIf",(null==t.form.controls.price.errors?null:t.form.controls.price.errors.required)&&t.form.controls.price.dirty),c.zb(5),c.jc("ngIf",(null==t.form.controls.category.errors?null:t.form.controls.category.errors.required)&&t.form.controls.category.dirty),c.zb(5),c.jc("ngIf",(null==t.form.controls.description.errors?null:t.form.controls.description.errors.required)&&t.form.controls.description.dirty),c.zb(44),c.jc("ngForOf",c.gc(88,17,t.packageTypes)),c.zb(26),c.jc("ngIf",(null==t.form.controls.place.errors?null:t.form.controls.place.errors.required)&&t.form.controls.place.dirty),c.zb(6),c.jc("ngForOf",t.destinations.controls),c.zb(9),c.jc("ngForOf",t.spots.controls),c.zb(10),c.jc("ngForOf",t.include.controls),c.zb(9),c.jc("ngForOf",t.exclude.controls),c.zb(7),c.jc("parent",t.form),c.zb(4),c.jc("ngClass",c.oc(19,N,t.form.invalid,t.edit,!t.edit)),c.zb(1),c.zc(" ",t.edit?"Update":"Create"," Package "))},directives:[b.u,b.n,b.g,b.a,b.m,b.f,b.b,g.n,b.p,m.g,m.j,b.r,b.o,b.t,g.m,b.c,y,g.l],pipes:[g.h],styles:[""]}),M);function U(e,t){if(1&e){var n=c.Sb();c.Rb(0,"div"),c.Rb(1,"packages-form",4),c.cc("create",(function(e){return c.rc(n),c.ec().onCreate(e)}))("update",(function(e){return c.rc(n),c.ec().onUpdate(e)})),c.Qb(),c.Qb()}if(2&e){var i=c.ec();c.zb(1),c.jc("package",i.package)}}function F(e,t){1&e&&(c.Rb(0,"div",5),c.Nb(1,"i",6),c.xc(2,"\xa0 Loading information ... "),c.Qb())}var z,j=((z=function(){function t(n,i,r,o){e(this,t),this.packageService=n,this.utilService=i,this.activeRoute=r,this.router=o,this.showBusy=!1,this.id=r.snapshot.params.id}return i(t,[{key:"ngOnInit",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.id&&this.getAdminPackage(this.id);case 1:case"end":return e.stop()}}),e,this)})))}},{key:"getAdminPackage",value:function(e){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.packageService.packages$.subscribe((function(t){n.package=t.find((function(t){return t.id==e})),console.log(n.package)}),(function(e){return console.log(e)}));case 2:case"end":return t.stop()}}),t,this)})))}},{key:"onCreate",value:function(e){var t=this;console.log("On create",e),this.stringifyPackage(e),this.packageService.create(e).then((function(e){t.router.navigate(["/dashboard/packages-list"])}))}},{key:"stringifyPackage",value:function(e){return e.departureDate=this.utilService.getDateStringFromDateObj(e.departureDate),e.departureTime=this.utilService.getTimeStringFromTimeObj(e.departureTime),e.returnDate=this.utilService.getDateStringFromDateObj(e.returnDate),e.returnTime=this.utilService.getTimeStringFromTimeObj(e.returnTime),e.lastBookingDate=this.utilService.getDateStringFromDateObj(e.lastBookingDate),e}},{key:"onUpdate",value:function(e){var t=this;console.log(e),this.showBusy=!0,this.stringifyPackage(e),this.packageService.update(this.id,e).then((function(e){t.showBusy=!1,console.log("Package updated Successfully"),t.router.navigate(["/dashboard/packages-list"])})).catch((function(e){t.showBusy=!1,console.log("Package could not update")}))}}]),t}()).\u0275fac=function(e){return new(e||z)(c.Mb(f.a),c.Mb(d.a),c.Mb(a.a),c.Mb(a.b))},z.\u0275cmp=c.Gb({type:z,selectors:[["app-add"]],decls:6,vars:4,consts:[[1,"container","text-center"],[3,"ngClass"],[4,"ngIf","ngIfElse"],["loading",""],[3,"package","create","update"],[1,"loading"],[1,"fa","fa-refresh"]],template:function(e,t){if(1&e&&(c.Rb(0,"div",0),c.Rb(1,"h2",1),c.xc(2),c.Qb(),c.Qb(),c.vc(3,U,2,1,"div",2),c.vc(4,F,3,0,"ng-template",null,3,c.wc)),2&e){var n=c.qc(5);c.zb(1),c.jc("ngClass",t.id?"bg-warning":""),c.zb(1),c.zc("",t.id?"Edit":"Add"," Package"),c.zb(1),c.jc("ngIf",!t.showBusy)("ngIfElse",n)}},directives:[g.l,g.n,O],styles:[""]}),z),T=r("XNiG"),L=r("b0Xh"),G=function(){function e(){}return e.prototype.getOrientedImage=function(e){return new Promise((function(t,n){var i;L||((L={}).getData=function(t,n){return n.call(e),!0},L.getTag=function(){return!1}),L.getData(e,(function(){var n=L.getTag(e,"Orientation");if(1!=n){var r=document.createElement("canvas"),o=r.getContext("2d"),a=e.width,s=e.height,c=0,u=0,l=0;switch(n){case 3:case 4:c=-e.width,u=-e.height,l=180;break;case 5:case 6:a=e.height,s=e.width,u=-e.height,l=90;break;case 7:case 8:a=e.height,s=e.width,c=-e.width,l=270}r.width=a,r.height=s,[2,4,5,7].indexOf(n)>-1&&(o.translate(a,0),o.scale(-1,1)),o.rotate(l*Math.PI/180),o.drawImage(e,c,u),(i=document.createElement("img")).width=a,i.height=s,i.addEventListener("load",(function(){t(i)})),i.src=r.toDataURL("image/png")}else t(e)}))}))},e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=c.Ib({token:e,factory:function(t){return e.\u0275fac(t)}}),e}(),q=function(){function e(e){this.imageExifService=e}return e.prototype.compressImage=function(e,t,n,i){var r=this;void 0===n&&(n=!1),void 0===i&&(i=!1);var o=new T.a;if(this.timeAtStart=(new Date).getTime(),this.initialFile=e,"image/jpeg"!==e.type&&"image/png"!==e.type)return setTimeout((function(){o.error({compressedFile:e,reason:"File provided is neither of type jpg nor of type png.",error:"INVALID_EXTENSION"})}),0),o.asObservable();if(e.size/1024/1024<t)return setTimeout((function(){o.next(e)}),0),o.asObservable();var a=document.createElement("canvas"),s=a.getContext("2d"),c=new Image,u=this;return c.onload=function(){r.imageExifService.getOrientedImage(c).then((function(l){window.URL.revokeObjectURL(c.src),a.width=l.width,a.height=l.height,s.drawImage(l,0,0);var f=s.getImageData(0,0,l.width,l.height);"image/png"===e.type&&r.isImgUsingAlpha(f)&&!n&&o.error({compressedFile:e,reason:"File provided is a png image which uses the alpha channel. No compression possible.",error:"PNG_WITH_ALPHA"}),(s=a.getContext("2d",{alpha:!1})).drawImage(l,0,0),u.getCompressedFile(a,50,t,1).then((function(e){o.next(e),u.logExecutionTime(i)})).catch((function(e){o.error(e),u.logExecutionTime(i)}))}))},c.src=window.URL.createObjectURL(e),o.asObservable()},e.prototype.getCompressedFile=function(e,t,n,i){var r=this;return new Promise((function(o,a){e.toBlob((function(s){if(i+1>15)a({compressedFile:r.getResultFile(s),reason:"Could not find the correct compression quality in 15 steps.",error:"MAX_STEPS_EXCEEDED"});else{var c=r.getCalculatedQuality(s,t,n,i);r.checkCompressionStatus(e,s,t,n,i,c).then((function(e){o(e)})).catch((function(e){a(e)}))}}),"image/jpeg",t/100)}))},e.prototype.getResultFile=function(e){return this.generateResultFile(e,this.initialFile.name,this.initialFile.type,(new Date).getTime())},e.prototype.generateResultFile=function(e,t,n,i){var r=new Blob([e],{type:n});return this.blobToFile(r,t,i)},e.prototype.blobToFile=function(e,t,n){var i=e;return i.name=t,i.lastModified=n,i},e.prototype.getCalculatedQuality=function(e,t,n,i){var r=e.size/1024/1024,o=n/r;o>5&&(o=5);var a=r/(this.initialFile.size/1024/1024);a<.05&&(a=.05);var s=0,c=10*Math.abs(a-1)/(1.7*i)/o;return c<1&&(c=1),(s=o>=1?t+10*(o-1)*c:t-10*(1-o)*c)>100&&(s=t+(100-t)/2),s<0&&(s=t-t/2),s},e.prototype.checkCompressionStatus=function(e,t,n,i,r,o){var a=this;return new Promise((function(s,c){100===n&&o>=100?c({compressedFile:a.initialFile,reason:"Unfortunately there was an error while compressing the file.",error:"FILE_BIGGER_THAN_INITIAL_FILE"}):n<1&&o<n?c({compressedFile:a.getResultFile(t),reason:"Could not compress image enough to fit the maximal file size limit.",error:"UNABLE_TO_COMPRESS_ENOUGH"}):o>n&&Math.round(n)==Math.round(o)||r>5&&o>n&&o<n+2||o>n&&Number.isInteger(n)&&Math.floor(o)==n?s(a.getResultFile(t)):(n>o&&Math.round(n)==Math.round(o)&&(o=Math.round(o)-1),s(a.getCompressedFile(e,o,i,r+1)))}))},e.prototype.isImgUsingAlpha=function(e){for(var t=0;t<e.data.length;t+=4)if(255!==e.data[t+3])return!0;return!1},e.prototype.logExecutionTime=function(e){e&&console.info("Execution time: ",(new Date).getTime()-this.timeAtStart+"ms")},e.\u0275fac=function(t){return new(t||e)(c.Zb(Object(c.T)((function(){return G}))))},e.\u0275prov=c.Ib({token:e,factory:function(t){return e.\u0275fac(t)}}),e}(),H=r("gkvR"),X=r.n(H),W=r("b0Xh"),Y=function(){function e(){}return e.prototype.getOrientedImage=function(e){return new Promise((function(t,n){var i;W||((W={}).getData=function(t,n){return n.call(e),!0},W.getTag=function(){return!1}),W.getData(e,(function(){var n=W.getTag(e,"Orientation");if(1!=n){var r=document.createElement("canvas"),o=r.getContext("2d"),a=e.width,s=e.height,c=0,u=0,l=0;switch(n){case 3:case 4:c=-e.width,u=-e.height,l=180;break;case 5:case 6:a=e.height,s=e.width,u=-e.height,l=90;break;case 7:case 8:a=e.height,s=e.width,c=-e.width,l=270}r.width=a,r.height=s,[2,4,5,7].indexOf(n)>-1&&(o.translate(a,0),o.scale(-1,1)),o.rotate(l*Math.PI/180),o.drawImage(e,c,u),(i=document.createElement("img")).width=a,i.height=s,i.addEventListener("load",(function(){t(i)})),i.src=r.toDataURL("image/png")}else t(e)}))}))},e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=c.Ib({token:e,factory:function(t){return e.\u0275fac(t)}}),e}(),V=function(){function e(e){this.imageExifService=e}return e.prototype.resize=function(e,t,n,i){void 0===i&&(i=!1);for(var r=new T.a,o=0;o<e.length;o++)this.resizeFile(e[o],t,n,i).then((function(e){r.next(e)})).catch((function(e){r.error(e)}));return r.asObservable()},e.prototype.resizeCanvas=function(e,t,n){return new Promise((function(i,r){var o=new X.a;o&&o.resize||(o=new window.pica),o.resize(e,t,n).then((function(e){i(e)}),(function(e){r(e)}))}))},e.prototype.resizeBuffer=function(e){return new Promise((function(t,n){var i=new X.a;i&&i.resizeBuffer||(i=new window.pica),i.resizeBuffer(e).then((function(e){t(e)}),(function(e){n(e)}))}))},e.prototype.resizeFile=function(e,t,n,i){var r=this;return void 0===i&&(i=!1),new Promise((function(o,a){var s=document.createElement("canvas"),c=s.getContext("2d"),u=new Image;u.onload=function(){r.imageExifService.getOrientedImage(u).then((function(l){window.URL.revokeObjectURL(u.src),s.width=l.width,s.height=l.height,c.drawImage(l,0,0);var f=c.getImageData(0,0,l.width,l.height);if(i){var d=Math.min(t/f.width,n/f.height);t=Math.round(f.width*d),n=Math.round(f.height*d)}var g=!0;("image/jpeg"===e.type||"image/png"===e.type&&!r.isImgUsingAlpha(f))&&(g=!1,(c=s.getContext("2d",{alpha:!1})).drawImage(l,0,0));var b=document.createElement("canvas");b.width=t,b.height=n,r.resizeCanvas(s,b,{alpha:g}).then((function(t){t.toBlob((function(t){var n=r.generateResultFile(t,e.name,e.type,(new Date).getTime());o(n)}),e.type)})).catch((function(e){a(e)}))}))},u.src=window.URL.createObjectURL(e)}))},e.prototype.isImgUsingAlpha=function(e){for(var t=0;t<e.data.length;t+=4)if(255!==e.data[t+3])return!0;return!1},e.prototype.generateResultFile=function(e,t,n,i){var r=new Blob([e],{type:n});return this.blobToFile(r,t,i)},e.prototype.blobToFile=function(e,t,n){var i=e;return i.name=t,i.lastModified=n,i},e.\u0275fac=function(t){return new(t||e)(c.Zb(Object(c.T)((function(){return Y}))))},e.\u0275prov=c.Ib({token:e,factory:function(t){return e.\u0275fac(t)}}),e}(),Z=function(){function e(){}return e.\u0275mod=c.Kb({type:e}),e.\u0275inj=c.Jb({factory:function(t){return new(t||e)},providers:[{provide:V,useClass:V},{provide:Y,useClass:Y}]}),e}(),J=function(){function e(e,t){this.ng2PicaService=e,this.imageExifService=t}return e.prototype.resizeImage=function(e,t,n,i){var r=this;void 0===i&&(i=!1);var o=new T.a;if(this.timeAtStart=(new Date).getTime(),"image/jpeg"!==e.type&&"image/png"!==e.type)return setTimeout((function(){o.error({resizedFile:e,reason:"The provided File is neither of type jpg nor of type png.",error:"INVALID_EXTENSION"})}),0),o.asObservable();var a=new Image,s=this;return a.onload=function(){r.imageExifService.getOrientedImage(a).then((function(r){window.URL.revokeObjectURL(a.src);var c=r.width,u=r.height,l=c,f=u;l>t&&(l=t,f*=t/c),u=f,f>n&&(f=n,l*=n/u),f===r.height&&l===r.width?(o.next(e),s.logExecutionTime(i)):s.ng2PicaService.resize([e],l,f).subscribe((function(e){o.next(e),s.logExecutionTime(i)}),(function(t){o.error({resizedFile:e,reason:t,error:"PICA_ERROR"}),s.logExecutionTime(i)}))}))},a.src=window.URL.createObjectURL(e),o.asObservable()},e.prototype.logExecutionTime=function(e){e&&console.info("Execution time: ",(new Date).getTime()-this.timeAtStart+"ms")},e.\u0275fac=function(t){return new(t||e)(c.Zb(Object(c.T)((function(){return V}))),c.Zb(Object(c.T)((function(){return G}))))},e.\u0275prov=c.Ib({token:e,factory:function(t){return e.\u0275fac(t)}}),e}(),K=function(){function e(e,t,n){this.imgMaxSizeService=e,this.imgMaxPXSizeService=t,this.imageExifService=n}return e.prototype.compress=function(e,t,n,i){var r=this;void 0===n&&(n=!1),void 0===i&&(i=!1);var o=new T.a;return e.forEach((function(e){r.compressImage(e,t,n,i).subscribe((function(e){o.next(e)}),(function(e){o.error(e)}))})),o.asObservable()},e.prototype.resize=function(e,t,n,i){var r=this;void 0===i&&(i=!1);var o=new T.a;return e.forEach((function(e){r.resizeImage(e,t,n,i).subscribe((function(e){o.next(e)}),(function(e){o.error(e)}))})),o.asObservable()},e.prototype.compressImage=function(e,t,n,i){return void 0===n&&(n=!1),void 0===i&&(i=!1),this.imgMaxSizeService.compressImage(e,t,n,i)},e.prototype.resizeImage=function(e,t,n,i){return void 0===i&&(i=!1),this.imgMaxPXSizeService.resizeImage(e,t,n,i)},e.prototype.getEXIFOrientedImage=function(e){return this.imageExifService.getOrientedImage(e)},e.\u0275fac=function(t){return new(t||e)(c.Zb(Object(c.T)((function(){return q}))),c.Zb(Object(c.T)((function(){return J}))),c.Zb(Object(c.T)((function(){return G}))))},e.\u0275prov=c.Ib({token:e,factory:function(t){return e.\u0275fac(t)}}),e}(),$=function(){function e(){}return e.\u0275mod=c.Kb({type:e}),e.\u0275inj=c.Jb({factory:function(t){return new(t||e)},providers:[{provide:J,useClass:J},{provide:q,useClass:q},{provide:G,useClass:G},{provide:K,useClass:K}],imports:[[Z]]}),e}(),ee=r("nYR2"),te=r("jhN1"),ne=r("BAab");function ie(e,t){if(1&e&&c.Nb(0,"img",11),2&e){var n=c.ec();c.jc("src",n.imageUrl,c.sc)}}function re(e,t){if(1&e){var n=c.Sb();c.Rb(0,"button",12),c.cc("click",(function(){return c.rc(n),c.ec().startUpload()})),c.xc(1," Upload "),c.Qb()}}function oe(e,t){if(1&e&&(c.Rb(0,"span"),c.xc(1),c.fc(2,"async"),c.fc(3,"async"),c.Qb()),2&e){var n=c.ec();c.zb(1),c.zc("",c.gc(2,1,n.uploadPercent)?c.gc(3,3,n.uploadPercent):0," Uploaded")}}var ae,se=((ae=function(){function t(n,i,r,o,a){e(this,t),this.packageService=n,this.ng2ImgMax=i,this.sanitizer=r,this.route=o,this.storage=a,this.showBusy=!1,this.id=this.route.snapshot.paramMap.get("id"),this.url="packages/"+this.id}return i(t,[{key:"ngOnInit",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.id,!e.t0){e.next=5;break}return this.showBusy=!0,e.next=5,this.packageService.packages$.subscribe((function(e){t.package=e.find((function(e){return e.id==t.id})),t.imageUrl=t.package.imageUrl,t.showBusy=!1}),(function(e){return console.log(e)}));case 5:case"end":return e.stop()}}),e,this)})))}},{key:"fileChange",value:function(e){this.resizeImage(e.target.files[0],800,600)}},{key:"resizeImage",value:function(e,t,n){var i=this;this.ng2ImgMax.resizeImage(e,t,n).subscribe((function(e){i.image=e,i.previewFile()}),(function(e){console.log("\ud83d\ude22 Image Resize error!!",e)}))}},{key:"previewFile",value:function(){var e=this,t=new FileReader;t.onload=function(t){e.imageUrl=t.target.result},t.readAsDataURL(this.image)}},{key:"startUpload",value:function(){var e=this,t=this.storage.ref(this.url),n=this.storage.upload(this.url,this.image);this.uploadPercent=n.percentageChanges(),n.snapshotChanges().pipe(Object(ee.a)((function(){e.downloadURL=t.getDownloadURL(),e.downloadURL.subscribe((function(t){e.package.imageUrl=t,e.packageService.update(e.id,e.package).then((function(e){console.log("\ud83d\ude22 Image url updated")}))}))}))).subscribe()}}]),t}()).\u0275fac=function(e){return new(e||ae)(c.Mb(f.a),c.Mb(K),c.Mb(te.b),c.Mb(a.a),c.Mb(ne.a))},ae.\u0275cmp=c.Gb({type:ae,selectors:[["app-packages-image"]],decls:20,vars:6,consts:[[1,"container-fluid"],[1,"row","my-4"],[1,"col-md-5","text-center"],["class","img-thumbnail","alt","","style","max-height: 500px;",3,"src",4,"ngIf"],[1,"col-md-7"],[1,"table","border"],["colspan","2",1,"text-center"],["routerLink","/dashboard/packages-list",1,"btn","btn-outline-danger","btn-sm","mx-1"],["type","button","class","btn btn-outline-primary btn-sm mx-1",3,"click",4,"ngIf"],[4,"ngIf"],["type","file","placeholder","Upload file","accept","image/x-png,image/gif,image/jpeg",3,"change"],["alt","",1,"img-thumbnail",2,"max-height","500px",3,"src"],["type","button",1,"btn","btn-outline-primary","btn-sm","mx-1",3,"click"]],template:function(e,t){1&e&&(c.Rb(0,"div",0),c.Rb(1,"div",1),c.Rb(2,"div",2),c.vc(3,ie,1,1,"img",3),c.Qb(),c.Rb(4,"div",4),c.Rb(5,"table",5),c.Rb(6,"tr"),c.Rb(7,"td",6),c.Rb(8,"h3"),c.xc(9),c.Qb(),c.Qb(),c.Qb(),c.Rb(10,"tr"),c.Rb(11,"td"),c.Rb(12,"div"),c.Rb(13,"a",7),c.xc(14,"Back "),c.Qb(),c.vc(15,re,2,0,"button",8),c.fc(16,"async"),c.vc(17,oe,4,5,"span",9),c.Qb(),c.Qb(),c.Rb(18,"td"),c.Rb(19,"input",10),c.cc("change",(function(e){return t.fileChange(e)})),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Qb()),2&e&&(c.zb(3),c.jc("ngIf",t.imageUrl),c.zb(6),c.yc(null==t.package?null:t.package.title),c.zb(6),c.jc("ngIf",t.image&&!c.gc(16,4,t.uploadPercent)),c.zb(2),c.jc("ngIf",t.image))},directives:[g.n,a.c],pipes:[g.b],styles:[""]}),ae);function ce(e,t){if(1&e&&c.Nb(0,"img",13),2&e){var n=c.ec().$implicit;c.jc("src",n.imageUrl,c.sc)}}function ue(e,t){if(1&e){var n=c.Sb();c.Rb(0,"tr"),c.Rb(1,"td",8),c.vc(2,ce,1,1,"img",9),c.Qb(),c.Rb(3,"td"),c.xc(4),c.Qb(),c.Rb(5,"td"),c.xc(6),c.Qb(),c.Rb(7,"td"),c.xc(8),c.Qb(),c.Rb(9,"td"),c.xc(10),c.Qb(),c.Rb(11,"td"),c.xc(12),c.Qb(),c.Rb(13,"td"),c.Rb(14,"a",10),c.xc(15,"Image"),c.Qb(),c.Rb(16,"button",11),c.cc("click",(function(){c.rc(n);var e=t.$implicit;return c.ec(2).onEdit(e.id)})),c.xc(17," Edit "),c.Qb(),c.Rb(18,"button",12),c.cc("click",(function(){c.rc(n);var e=t.$implicit;return c.ec(2).onDelete(e.id)})),c.xc(19," Delete "),c.Qb(),c.Qb(),c.Qb()}if(2&e){var i=t.$implicit;c.zb(2),c.jc("ngIf",null==i?null:i.imageUrl),c.zb(2),c.yc(i.title),c.zb(2),c.yc(i.place),c.zb(2),c.Ac("",i.type," - ",i.domestic?"Domestic":"International",""),c.zb(2),c.yc(i.departureDate),c.zb(2),c.yc(i.active),c.zb(2),c.lc("routerLink","/dashboard/packages-image/",i.id,"")}}function le(e,t){if(1&e&&(c.Rb(0,"tbody"),c.vc(1,ue,20,8,"tr",7),c.Qb()),2&e){var n=c.ec();c.zb(1),c.jc("ngForOf",n.packages)}}function fe(e,t){1&e&&(c.Rb(0,"tr"),c.Rb(1,"td",14),c.Rb(2,"div",15),c.Nb(3,"i",16),c.xc(4,"\xa0 Loading information ... "),c.Qb(),c.Qb(),c.Qb())}var de,ge=((de=function(){function t(n,i,r){e(this,t),this.packageService=n,this.router=i,this.storage=r,this.showLoading=!1}return i(t,[{key:"ngOnInit",value:function(){this.getAllPackages()}},{key:"getAllPackages",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.showLoading=!0,e.next=3,this.packageService.packages$.subscribe((function(e){t.packages=e,t.showLoading=!1}),(function(e){console.log(e),t.showLoading=!1}));case 3:case"end":return e.stop()}}),e,this)})))}},{key:"onEdit",value:function(e){this.router.navigate(["/dashboard/packages-add",e])}},{key:"onDelete",value:function(e){if(confirm("Are you sure to delete")){var t=this.packages.find((function(t){return t.id===e})).imageUrl;console.log("hd",t),t&&this.storage.storage.refFromURL(t).delete(),this.packageService.delete(e).then((function(e){console.log("Package Deleted successfully")}))}}}]),t}()).\u0275fac=function(e){return new(e||de)(c.Mb(f.a),c.Mb(a.b),c.Mb(ne.a))},de.\u0275cmp=c.Gb({type:de,selectors:[["app-packages-list"]],decls:24,vars:2,consts:[[1,"container-fluid"],[1,"text-center"],[1,"row","mx-1"],[1,"table-responsive"],[1,"table","table-hover"],[1,"table-primary"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"p-1"],["class","img-thumbnail","alt","image not found","style","max-height: 80px;",3,"src",4,"ngIf"],[1,"btn","btn-sm","btn-primary","mx-1",3,"routerLink"],[1,"btn","btn-sm","btn-warning","mx-1",3,"click"],[1,"btn","btn-sm","btn-danger","mx-1",3,"click"],["alt","image not found",1,"img-thumbnail",2,"max-height","80px",3,"src"],["colspan","7"],[1,"loading"],[1,"fa","fa-refresh"]],template:function(e,t){1&e&&(c.Rb(0,"div",0),c.Rb(1,"h3",1),c.xc(2,"Package List"),c.Qb(),c.Rb(3,"div",2),c.Rb(4,"div",3),c.Rb(5,"table",4),c.Rb(6,"thead"),c.Rb(7,"tr",5),c.Rb(8,"th"),c.xc(9,"Image"),c.Qb(),c.Rb(10,"th"),c.xc(11,"Title"),c.Qb(),c.Rb(12,"th"),c.xc(13,"Place"),c.Qb(),c.Rb(14,"th"),c.xc(15,"Type"),c.Qb(),c.Rb(16,"th"),c.xc(17,"Date"),c.Qb(),c.Rb(18,"th"),c.xc(19,"Active"),c.Qb(),c.Rb(20,"th"),c.xc(21,"Actions"),c.Qb(),c.Qb(),c.Qb(),c.vc(22,le,2,1,"tbody",6),c.vc(23,fe,5,0,"tr",6),c.Qb(),c.Qb(),c.Qb(),c.Qb()),2&e&&(c.zb(22),c.jc("ngIf",!t.showLoading),c.zb(1),c.jc("ngIf",t.showLoading))},directives:[g.n,g.m,a.c],styles:[""]}),de),be=[{name:"Dashboard",icon:"fa-home",url:"/dashboard",authority:"",secondMenu:[]},{name:"Packages",icon:"fa-briefcase",url:"",authority:"",secondMenu:[{name:"Add",icon:"fa-plus",url:"/dashboard/packages-add",authority:"ADMIN"},{name:"List",icon:"fa-list",url:"/dashboard/packages-list",authority:"ADMIN"}]},{name:"Hot Deals",icon:"fa-fire",url:"",authority:"",secondMenu:[{name:"Add",icon:"fa-plus",url:"/dashboard/hotdeals-add",authority:"ADMIN"},{name:"List",icon:"fa-list",url:"/dashboard/hotdeals-list",authority:"ADMIN"}]},{name:"Our Clients",icon:"fa-file-image-o",url:"",authority:"",secondMenu:[{name:"Add",icon:"fa-plus",url:"/dashboard/our-client-add",authority:"ADMIN"},{name:"List",icon:"fa-list",url:"/dashboard/our-client-list",authority:"ADMIN"}]},{name:"User",icon:"fa-user",url:"",authority:"",secondMenu:[{name:"Add",icon:"fa-plus",url:"/dashboard/user/add",authority:"ADMIN"},{name:"List",icon:"fa-list",url:"/dashboard/user",authority:"ADMIN"},{name:"Roles",icon:"fa-smile-o",url:"/dashboard/user/roles",authority:"ADMIN"}]},{name:"Employee",icon:"fa-user",url:"",authority:"",secondMenu:[{name:"Add",icon:"fa-plus",url:"/dashboard/employee/add",authority:"ADMIN"},{name:"List",icon:"fa-list",url:"/dashboard/employee",authority:"ADMIN"}]},{name:"Feedback",icon:"fa-commenting-o ",url:"/dashboard/feedbacks",authority:"ADMIN",secondMenu:[]},{name:"Custom Package",icon:"fa-pencil-square-o ",url:"/dashboard/customPackages",authority:"ADMIN",secondMenu:[]}];function he(e,t){if(1&e){var n=c.Sb();c.Rb(0,"small",13),c.Rb(1,"i",14),c.cc("click",(function(){c.rc(n);var e=c.ec(2).$implicit;return c.ec().minimize(e.name)})),c.Qb(),c.Qb()}if(2&e){var i=c.ec(2).$implicit,r=c.ec();c.zb(1),c.jc("ngClass",r.isActive(i.name)?" fa-chevron-down":"fa-chevron-right")}}var me=function(e){return{selected:e}};function pe(e,t){if(1&e){var n=c.Sb();c.Rb(0,"li",16),c.cc("click",(function(){c.rc(n);var e=c.ec().$implicit,t=c.ec(3);return e.url.length>0?t.navigateTo(e.url):null})),c.Nb(1,"i",10),c.xc(2,"\xa0 "),c.Rb(3,"span"),c.xc(4),c.Qb(),c.Qb()}if(2&e){var i=c.ec().$implicit,r=c.ec(3);c.jc("ngClass",c.mc(3,me,i.url==r.navUrl)),c.zb(1),c.jc("ngClass",i.icon),c.zb(3),c.zc("",i.name," ")}}function Ae(e,t){if(1&e&&(c.Rb(0,"span"),c.vc(1,pe,5,5,"li",15),c.Qb()),2&e){var n=t.$implicit,i=c.ec(3);c.zb(1),c.jc("ngIf",i.hasAuthority(n.authority))}}var ve=function(e){return{active:e}};function ye(e,t){if(1&e){var n=c.Sb();c.Rb(0,"li",7),c.cc("click",(function(){c.rc(n);var e=c.ec().$implicit,t=c.ec();return e.url.length>0?t.navigateTo(e.url):null})),c.Rb(1,"div",8),c.Rb(2,"div",9),c.cc("click",(function(){c.rc(n);var e=c.ec().$implicit;return c.ec().select(e.name)})),c.Nb(3,"i",10),c.Rb(4,"span",11),c.xc(5),c.Qb(),c.Qb(),c.vc(6,he,2,1,"small",12),c.Qb(),c.Rb(7,"ul",4),c.vc(8,Ae,2,1,"span",5),c.Qb(),c.Qb()}if(2&e){var i=c.ec().$implicit,r=c.ec();c.jc("ngClass",c.mc(5,ve,r.isActive(i.name))),c.zb(3),c.jc("ngClass",i.icon),c.zb(2),c.zc(" ",i.name,""),c.zb(1),c.jc("ngIf",i.secondMenu.length>0),c.zb(2),c.jc("ngForOf",i.secondMenu)}}function we(e,t){if(1&e&&(c.Rb(0,"span"),c.vc(1,ye,9,7,"li",6),c.Qb()),2&e){var n=t.$implicit,i=c.ec();c.zb(1),c.jc("ngIf",i.hasAuthority(n.authority))}}var Ie,Qe,Re,xe=((Ie=function(){function t(n){e(this,t),this.router=n,this.selected="Dashboard",this.menuList=be}return i(t,[{key:"ngOnInit",value:function(){}},{key:"select",value:function(e){this.selected=e}},{key:"isActive",value:function(e){return this.selected===e}},{key:"minimize",value:function(e){this.selected=e==this.selected?null:e}},{key:"navigateTo",value:function(e){this.navUrl=e,this.router.navigate([this.navUrl])}},{key:"hasAuthority",value:function(e){return!0}}]),t}()).\u0275fac=function(e){return new(e||Ie)(c.Mb(a.b))},Ie.\u0275cmp=c.Gb({type:Ie,selectors:[["side-navbar"]],decls:7,vars:1,consts:[[1,"brand","mb-3","bg-dark","shadow-sm"],["routerLink","/",2,"text-decoration","none","color","whitesmoke"],["src","assets/images/logo.jpg"],["id","sideNav"],[1,"list-group"],[4,"ngFor","ngForOf"],["class","nav-group-item",3,"ngClass","click",4,"ngIf"],[1,"nav-group-item",3,"ngClass","click"],[1,"row","menu"],[1,"col","menu-item",3,"click"],[1,"fa",3,"ngClass"],[1,"menu-item-text"],["class","pull-right px-2","style","cursor: pointer;",4,"ngIf"],[1,"pull-right","px-2",2,"cursor","pointer"],[1,"fa",3,"ngClass","click"],["style","display:none;","class","nav-group-item first pl-3",3,"ngClass","click",4,"ngIf"],[1,"nav-group-item","first","pl-3",2,"display","none",3,"ngClass","click"]],template:function(e,t){1&e&&(c.Rb(0,"div",0),c.Rb(1,"a",1),c.Nb(2,"img",2),c.Qb(),c.Qb(),c.Rb(3,"nav",3),c.Rb(4,"div"),c.Rb(5,"ul",4),c.vc(6,we,2,1,"span",5),c.Qb(),c.Qb(),c.Qb()),2&e&&(c.zb(6),c.jc("ngForOf",t.menuList))},directives:[a.c,g.m,g.n,g.l],styles:["[_nghost-%COMP%]{background:#2c303b;color:#fff;position:fixed;left:0;top:0;right:auto;bottom:0;width:20%;max-width:300px;z-index:9999;font-family:Open Sans,Arial,Helvetica Neue,Helvetica,sans-serif;overflow-y:hidden;transition-property:all;transition-duration:.5s;transition-timing-function:cubic-bezier(0,1,.5,1)}.brand[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:70px;padding:10px 5px}.brand[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:25px;font-weight:500}.menu[_ngcontent-%COMP%]{padding:10px;margin:0;font-size:14px;font-weight:200}.menu-item[_ngcontent-%COMP%]{cursor:pointer;padding:5px}.menu-item[_ngcontent-%COMP%]:hover{padding-left:15px;transition:all .25s ease}.active[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{background-color:#23262f}.active[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block!important;color:#fff;padding:10px;padding-left:30px!important;margin:0;font-size:14px;font-weight:200;cursor:pointer}.active[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{padding-left:5px;transition:all .25s ease}.selected[_ngcontent-%COMP%]{color:#74b281!important;font-weight:600!important}"]}),Ie),Ce=r("u6mN"),ke=((Re=function(){function t(n){e(this,t),this.auth=n,this.toggle=new c.n,this.username="user"}return i(t,[{key:"ngOnInit",value:function(){var e=localStorage.getItem("username");e.length>1&&(this.username=e)}},{key:"toggleMenu",value:function(){this.toggle.emit()}},{key:"logout",value:function(){this.auth.logout()}}]),t}()).\u0275fac=function(e){return new(e||Re)(c.Mb(Ce.a))},Re.\u0275cmp=c.Gb({type:Re,selectors:[["dash-navbar"]],outputs:{toggle:"toggle"},decls:63,vars:4,consts:[[1,"navbar","navbar-expand-md","py-3","shadow-sm"],[1,"btn",3,"click"],[1,"fa","fa-bars"],[1,"my-0","ml-2","mr-md-auto","company-name"],[1,"btn"],[1,"fa","fa-search"],["type","button","data-toggle","collapse","data-target","#navbarCollapse","aria-controls","navbarCollapse","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarCollapse",1,"collapse","navbar-collapse"],[1,"navbar-nav","mr-auto"],[1,"navbar-nav"],[1,"nav-item"],["href","#",1,"nav-link"],[1,"user-name"],["ngbDropdown","","placement","bottom-right",1,"d-inline-block"],["id","dropdownBasic1","ngbDropdownToggle","",1,"btn","btn-profile"],["src","assets/images/mrbean.jpg",1,"user-pic"],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1"],[1,"dropdown-item"],[1,"fa","fa-user-o","px-1"],[1,"fa","fa-envelope-o","px-1"],[1,"fa","fa-check-square-o","px-1"],[1,"fa","fa-comment-o","px-1"],[1,"dropdown-item",3,"click"],[1,"fa","fa-sign-out","px-1"],[1,"fa","fa-bell-o",2,"font-size","25px"],[1,"badge","badge-pill","badge-info","shadow"],[1,"fa","fa-envelope-o",2,"font-size","25px"]],template:function(e,t){var n;1&e&&(c.Rb(0,"nav",0),c.Rb(1,"button",1),c.cc("click",(function(){return t.toggleMenu()})),c.Nb(2,"i",2),c.Qb(),c.Rb(3,"h5",3),c.xc(4),c.fc(5,"async"),c.Qb(),c.Rb(6,"button",4),c.Nb(7,"i",5),c.Qb(),c.Rb(8,"button",6),c.Nb(9,"span",7),c.Qb(),c.Rb(10,"div",8),c.Nb(11,"ul",9),c.Rb(12,"ul",10),c.Rb(13,"li",11),c.Rb(14,"span",12),c.xc(15,"Hello, "),c.Rb(16,"span",13),c.xc(17),c.Qb(),c.Qb(),c.Qb(),c.Rb(18,"li",11),c.Rb(19,"div",14),c.Rb(20,"button",15),c.Nb(21,"img",16),c.Qb(),c.Rb(22,"div",17),c.Rb(23,"button",18),c.Nb(24,"i",19),c.xc(25," Edit profile "),c.Qb(),c.Rb(26,"button",18),c.Nb(27,"i",20),c.xc(28," My inbox "),c.Qb(),c.Rb(29,"button",18),c.Nb(30,"i",21),c.xc(31," Tasks "),c.Qb(),c.Rb(32,"button",18),c.Nb(33,"i",22),c.xc(34," Chats "),c.Qb(),c.Nb(35,"hr"),c.Rb(36,"button",23),c.cc("click",(function(){return t.logout()})),c.Nb(37,"i",24),c.xc(38," Logout "),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Rb(39,"li",11),c.Rb(40,"div",14),c.Rb(41,"button",15),c.Nb(42,"i",25),c.Rb(43,"span",26),c.xc(44,"6"),c.Qb(),c.Qb(),c.Rb(45,"div",17),c.Rb(46,"button",18),c.xc(47,"Action - 1"),c.Qb(),c.Rb(48,"button",18),c.xc(49,"Another Action"),c.Qb(),c.Rb(50,"button",18),c.xc(51,"Something else is here"),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Rb(52,"li",11),c.Rb(53,"div",14),c.Rb(54,"button",15),c.Nb(55,"i",27),c.Qb(),c.Rb(56,"div",17),c.Rb(57,"button",18),c.xc(58,"Action - 1"),c.Qb(),c.Rb(59,"button",18),c.xc(60,"Another Action"),c.Qb(),c.Rb(61,"button",18),c.xc(62,"Something else is here"),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Qb()),2&e&&(c.zb(4),c.zc(" ",null==(n=c.gc(5,2,t.auth.user$))?null:n.email," "),c.zb(13),c.yc(t.username))},directives:[m.d,m.f,m.e],pipes:[g.b],styles:[".company-name[_ngcontent-%COMP%]{color:grey;font-family:Quicksand,Georgia,Times New Roman,Times,serif;font-weight:200}.fa-search[_ngcontent-%COMP%]{color:grey;font-weight:100}.nav-link[_ngcontent-%COMP%]{font-family:Quicksand,Georgia,Times New Roman,Times,serif;font-size:1rem;font-weight:100}.user-name[_ngcontent-%COMP%]{font-weight:700}.user-pic[_ngcontent-%COMP%]{padding:0 5px;height:36px;border-radius:50%}.user-flag[_ngcontent-%COMP%]{padding:0 5px;height:30px}.dropdown-flag[_ngcontent-%COMP%]{padding:0 5px;height:20px}.dropdown-toggle[_ngcontent-%COMP%]:after{content:none}.badge-info[_ngcontent-%COMP%]{position:absolute;top:-3px;left:25px}.btn-profile[_ngcontent-%COMP%]{padding:0 10px}"]}),Re),Ee=((Qe=function(){function t(){e(this,t),this.menuState="in",this.compState="narrow"}return i(t,[{key:"toggleMenu",value:function(){this.menuState="out"===this.menuState?"in":"out"}},{key:"openNav",value:function(){this.menuState="in"}},{key:"closeNav",value:function(){this.menuState="out"}}]),t}()).\u0275fac=function(e){return new(e||Qe)},Qe.\u0275cmp=c.Gb({type:Qe,selectors:[["dashboard"]],decls:5,vars:1,consts:[[1,"menu",3,"ngClass"],[1,"menu-side"],[1,"content"],[3,"toggle"]],template:function(e,t){1&e&&(c.Rb(0,"div",0),c.Nb(1,"side-navbar",1),c.Rb(2,"div",2),c.Rb(3,"dash-navbar",3),c.cc("toggle",(function(){return t.toggleMenu()})),c.Qb(),c.Nb(4,"router-outlet"),c.Qb(),c.Qb()),2&e&&c.jc("ngClass","in"===t.menuState?"menu-open":"menu-close")},directives:[g.l,xe,ke,a.e],styles:[".content[_ngcontent-%COMP%] {\n        -webkit-transition: margin-left 0.8s;\n        -moz-transition: margin-left 0.8s;\n        transition: margin-left 0.8s;\n      }\n      .menu-side[_ngcontent-%COMP%] {\n        width: 245px;\n        left: -245px;\n        transition: 0.8s;\n      }\n      .menu-open[_ngcontent-%COMP%]   .menu-side[_ngcontent-%COMP%] {\n        left: 0;\n        z-index: 0;\n      }\n      .menu-open[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%] {\n        margin-left: 245px;\n      }"]}),Qe),Be=r("9I/d");function Se(e,t){1&e&&(c.Rb(0,"small",27),c.xc(1,"Title required"),c.Qb())}function De(e,t){1&e&&(c.Rb(0,"small",27),c.xc(1,"Tour Date required"),c.Qb())}function _e(e,t){1&e&&(c.Rb(0,"small",27),c.xc(1,"Institute required"),c.Qb())}function Pe(e,t){1&e&&(c.Rb(0,"small",27),c.xc(1,"Department required"),c.Qb())}function Me(e,t){1&e&&(c.Rb(0,"small",27),c.xc(1,"Duration required"),c.Qb())}function Ne(e,t){1&e&&(c.Rb(0,"small",27),c.xc(1,"Number Guests required"),c.Qb())}function Oe(e,t){1&e&&(c.Rb(0,"small",27),c.xc(1,"Description required"),c.Qb())}var Ue,Fe=function(e,t,n){return{disabled:e,"btn-warning":t,"btn-success":n}},ze=((Ue=function(){function t(n){e(this,t),this.fb=n,this.create=new c.n,this.update=new c.n,this.mouseoverShifting=!1,this.edit=!1,this.createForm()}return i(t,[{key:"ngOnChanges",value:function(){null!=this.ourClient&&null!=this.ourClient.id&&(this.edit=!0,this.form.patchValue(this.ourClient))}},{key:"createForm",value:function(){this.form=this.fb.group({eventDate:["",b.s.required],title:["",b.s.required],active:!1,institute:["",b.s.required],department:["",b.s.required],duration:["",b.s.required],details:["",b.s.required],numberGuests:["",b.s.required]})}},{key:"submit",value:function(){this.edit?this.update.emit(this.form.value):this.create.emit(this.form.value),this.form.reset(),this.createForm()}}]),t}()).\u0275fac=function(e){return new(e||Ue)(c.Mb(b.d))},Ue.\u0275cmp=c.Gb({type:Ue,selectors:[["our-client-form"]],inputs:{ourClient:"ourClient"},outputs:{create:"create",update:"update"},features:[c.xb],decls:50,vars:14,consts:[[1,"container-fluid"],[1,"my-3","p-4","shifting-form","label1","text-left",3,"formGroup","ngSubmit","mouseleave"],[1,"form-group","row","my-3"],[1,"col"],[1,"form-check","form-check-inline"],["type","checkbox","id","active","formControlName","active",1,"form-check-input"],["for","active",1,"form-check-label"],[1,"row","my-3"],["for","title"],["formControlName","title","id","title","placeholder","Title",1,"form-control"],["class","text-danger",4,"ngIf"],["for","eventDate"],["type","date","formControlName","eventDate","id","tourDate","placeholder","Event Date",1,"form-control"],["for","institute"],["formControlName","institute","id","institute","placeholder","Institute",1,"form-control"],["for","department"],["formControlName","department","id","department","placeholder","Department",1,"form-control"],["for","duration"],["formControlName","duration","id","duration","placeholder","Duration",1,"form-control"],["for","numberGuests"],["type","number","formControlName","numberGuests","id","numberGuests","placeholder","NumberGuests",1,"form-control"],[1,"form-group"],["for","details"],["id","details","rows","3","formControlName","details",1,"form-control"],[1,"d-flex","flex-row-reverse","bd-highlight"],[3,"mouseenter"],["type","submit","type","submit",1,"btn","btn-warning","mx-1",3,"ngClass"],[1,"text-danger"]],template:function(e,t){1&e&&(c.Rb(0,"div",0),c.Rb(1,"form",1),c.cc("ngSubmit",(function(){return t.submit()}))("mouseleave",(function(){return t.mouseoverShifting=!1})),c.Rb(2,"div",2),c.Rb(3,"div",3),c.Rb(4,"div",4),c.Nb(5,"input",5),c.Rb(6,"label",6),c.xc(7,"Active"),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Rb(8,"div",7),c.Rb(9,"div",3),c.Rb(10,"label",8),c.xc(11,"Title"),c.Qb(),c.Nb(12,"input",9),c.vc(13,Se,2,0,"small",10),c.Qb(),c.Rb(14,"div",3),c.Rb(15,"label",11),c.xc(16,"Event Date"),c.Qb(),c.Nb(17,"input",12),c.vc(18,De,2,0,"small",10),c.Qb(),c.Qb(),c.Rb(19,"div",7),c.Rb(20,"div",3),c.Rb(21,"label",13),c.xc(22,"Institute"),c.Qb(),c.Nb(23,"input",14),c.vc(24,_e,2,0,"small",10),c.Qb(),c.Rb(25,"div",3),c.Rb(26,"label",15),c.xc(27,"Department"),c.Qb(),c.Nb(28,"input",16),c.vc(29,Pe,2,0,"small",10),c.Qb(),c.Qb(),c.Rb(30,"div",2),c.Rb(31,"div",3),c.Rb(32,"label",17),c.xc(33,"Duration"),c.Qb(),c.Nb(34,"input",18),c.vc(35,Me,2,0,"small",10),c.Qb(),c.Rb(36,"div",3),c.Rb(37,"label",19),c.xc(38,"Number Guests"),c.Qb(),c.Nb(39,"input",20),c.vc(40,Ne,2,0,"small",10),c.Qb(),c.Qb(),c.Rb(41,"div",21),c.Rb(42,"label",22),c.xc(43,"Details"),c.Qb(),c.Nb(44,"textarea",23),c.vc(45,Oe,2,0,"small",10),c.Qb(),c.Rb(46,"div",24),c.Rb(47,"span",25),c.cc("mouseenter",(function(){return t.mouseoverShifting=!0})),c.Rb(48,"button",26),c.xc(49),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Qb()),2&e&&(c.zb(1),c.jc("formGroup",t.form),c.zb(12),c.jc("ngIf",(null==t.form.controls.title.errors?null:t.form.controls.title.errors.required)&&(t.form.controls.title.dirty||t.mouseoverShifting)),c.zb(5),c.jc("ngIf",(null==t.form.controls.eventDate.errors?null:t.form.controls.eventDate.errors.required)&&(t.form.controls.eventDate.dirty||t.mouseoverShifting)),c.zb(6),c.jc("ngIf",(null==t.form.controls.institute.errors?null:t.form.controls.institute.errors.required)&&(t.form.controls.institute.dirty||t.mouseoverShifting)),c.zb(5),c.jc("ngIf",(null==t.form.controls.department.errors?null:t.form.controls.department.errors.required)&&(t.form.controls.department.dirty||t.mouseoverShifting)),c.zb(6),c.jc("ngIf",(null==t.form.controls.duration.errors?null:t.form.controls.duration.errors.required)&&(t.form.controls.duration.dirty||t.mouseoverShifting)),c.zb(5),c.jc("ngIf",(null==t.form.controls.numberGuests.errors?null:t.form.controls.numberGuests.errors.required)&&(t.form.controls.numberGuests.dirty||t.mouseoverShifting)),c.zb(5),c.jc("ngIf",(null==t.form.controls.details.errors?null:t.form.controls.details.errors.required)&&(t.form.controls.details.dirty||t.mouseoverShifting)),c.zb(3),c.jc("ngClass",c.oc(10,Fe,t.form.invalid,t.edit,!t.edit)),c.zb(1),c.zc(" ",t.edit?"Update":"Create"," "))},directives:[b.u,b.n,b.g,b.a,b.m,b.f,b.b,g.n,b.p,g.l],styles:[""]}),Ue);function je(e,t){if(1&e){var n=c.Sb();c.Rb(0,"div"),c.Rb(1,"our-client-form",4),c.cc("create",(function(e){return c.rc(n),c.ec().onCreate(e)}))("update",(function(e){return c.rc(n),c.ec().onUpdate(e)})),c.Qb(),c.Qb()}if(2&e){var i=c.ec();c.zb(1),c.jc("ourClient",i.ourClient)}}function Te(e,t){1&e&&(c.Rb(0,"div",5),c.Nb(1,"i",6),c.xc(2,"\xa0 Loading information ... "),c.Qb())}var Le,Ge=((Le=function(){function t(n,i,r){e(this,t),this.ourClientService=n,this.activeRoute=i,this.router=r,this.showBusy=!1,this.id=i.snapshot.paramMap.get("id")}return i(t,[{key:"ngOnInit",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.id,!e.t0){e.next=5;break}return this.showBusy=!0,e.next=5,this.ourClientService.ourClients$.subscribe((function(e){t.ourClient=e.find((function(e){return e.id==t.id})),t.showBusy=!1}));case 5:case"end":return e.stop()}}),e,this)})))}},{key:"onCreate",value:function(e){var t=this;console.log(e),this.showBusy=!0,this.ourClientService.create(e).then((function(e){t.showBusy=!1,console.log("New client created Successfully"),t.router.navigate(["/dashboard/our-client-list"])})).catch((function(e){t.showBusy=!1,console.log("Client could not create")}))}},{key:"onUpdate",value:function(e){var t=this;console.log(e),this.showBusy=!0,this.ourClientService.update(this.id,e).then((function(e){t.showBusy=!1,console.log("Client updated Successfully"),t.router.navigate(["/dashboard/our-client-list"])})).catch((function(e){t.showBusy=!1,console.log("Client could not update")}))}}]),t}()).\u0275fac=function(e){return new(e||Le)(c.Mb(Be.a),c.Mb(a.a),c.Mb(a.b))},Le.\u0275cmp=c.Gb({type:Le,selectors:[["app-our-client-add"]],decls:6,vars:4,consts:[[1,"container","text-center"],[3,"ngClass"],[4,"ngIf","ngIfElse"],["loading",""],[3,"ourClient","create","update"],[1,"loading"],[1,"fa","fa-refresh"]],template:function(e,t){if(1&e&&(c.Rb(0,"div",0),c.Rb(1,"h2",1),c.xc(2),c.Qb(),c.Qb(),c.vc(3,je,2,1,"div",2),c.vc(4,Te,3,0,"ng-template",null,3,c.wc)),2&e){var n=c.qc(5);c.zb(1),c.jc("ngClass",t.id?"bg-warning":""),c.zb(1),c.zc("",t.id?"Edit":"Add"," Client"),c.zb(1),c.jc("ngIf",!t.showBusy)("ngIfElse",n)}},directives:[g.l,g.n,ze],styles:[""]}),Le);function qe(e,t){if(1&e){var n=c.Sb();c.Rb(0,"tr"),c.Rb(1,"td"),c.xc(2),c.Qb(),c.Rb(3,"td"),c.xc(4),c.Qb(),c.Rb(5,"td"),c.xc(6),c.Qb(),c.Rb(7,"td"),c.xc(8),c.Qb(),c.Rb(9,"td"),c.Rb(10,"a",8),c.xc(11," Image "),c.Qb(),c.Qb(),c.Rb(12,"td"),c.Rb(13,"button",9),c.cc("click",(function(){c.rc(n);var e=t.$implicit;return c.ec(2).onEdit(e.id)})),c.xc(14," Edit "),c.Qb(),c.Qb(),c.Rb(15,"td"),c.Rb(16,"button",10),c.cc("click",(function(){c.rc(n);var e=t.$implicit;return c.ec(2).onDelete(e.id)})),c.xc(17," Delete "),c.Qb(),c.Qb(),c.Qb()}if(2&e){var i=t.$implicit;c.zb(2),c.yc(i.eventDate),c.zb(2),c.yc(i.title),c.zb(2),c.yc(i.institute),c.zb(2),c.yc(i.active),c.zb(2),c.lc("routerLink","/dashboard/our-client-image/",i.id,"")}}function He(e,t){if(1&e&&(c.Rb(0,"tbody"),c.vc(1,qe,18,5,"tr",7),c.Qb()),2&e){var n=c.ec();c.zb(1),c.jc("ngForOf",n.ourClients)}}function Xe(e,t){1&e&&(c.Rb(0,"tr"),c.Rb(1,"td",11),c.Rb(2,"div",12),c.Nb(3,"i",13),c.xc(4,"\xa0 Loading information ... "),c.Qb(),c.Qb(),c.Qb())}function We(e,t){if(1&e&&c.Nb(0,"img",11),2&e){var n=c.ec(2).index,i=c.ec();c.jc("src",i.imageUrls[n],c.sc)}}function Ye(e,t){if(1&e&&(c.Rb(0,"div"),c.vc(1,We,1,1,"img",10),c.Qb()),2&e){var n=c.ec().index,i=c.ec();c.zb(1),c.jc("ngIf",i.imageUrls[n])}}function Ve(e,t){1&e&&(c.Rb(0,"div",12),c.Nb(1,"i",13),c.xc(2,"\xa0 Resizing image ... "),c.Qb())}function Ze(e,t){if(1&e){var n=c.Sb();c.Rb(0,"button",17),c.cc("click",(function(){c.rc(n);var e=c.ec(2).index;return c.ec().startUpload(e)})),c.xc(1," Upload "),c.Qb()}}function Je(e,t){if(1&e&&(c.Rb(0,"div",14),c.Rb(1,"a",15),c.xc(2," Back "),c.Qb(),c.vc(3,Ze,2,0,"button",16),c.Qb()),2&e){var n=c.ec().index,i=c.ec();c.zb(3),c.jc("ngIf",i.image[n]&&100!=i.uploadPercent[n])}}function Ke(e,t){if(1&e&&(c.Rb(0,"span"),c.Rb(1,"h2"),c.xc(2),c.Qb(),c.Qb()),2&e){var n=c.ec().index,i=c.ec();c.zb(2),c.zc("",i.uploadPercent[n],"% Uploaded")}}function $e(e,t){1&e&&(c.Rb(0,"div",12),c.Nb(1,"i",13),c.xc(2,"\xa0 Uploading image ... "),c.Qb())}function et(e,t){if(1&e){var n=c.Sb();c.Rb(0,"div",2),c.Rb(1,"div",3),c.vc(2,Ye,2,1,"div",4),c.vc(3,Ve,3,0,"ng-template",null,5,c.wc),c.Qb(),c.Rb(5,"div",3),c.Rb(6,"h5"),c.xc(7),c.Qb(),c.Rb(8,"input",6),c.cc("change",(function(e){c.rc(n);var i=t.index;return c.ec().fileChange(e,i)})),c.Qb(),c.vc(9,Je,4,1,"div",7),c.vc(10,Ke,3,1,"span",8),c.vc(11,$e,3,0,"ng-template",null,9,c.wc),c.Qb(),c.Qb()}if(2&e){var i=t.index,r=c.qc(4),o=c.qc(12),a=c.ec();c.zb(2),c.jc("ngIf",!a.resizing)("ngIfElse",r),c.zb(5),c.zc("Image ",i+1,""),c.zb(2),c.jc("ngIf",!a.uploading)("ngIfElse",o),c.zb(1),c.jc("ngIf",a.image[i]&&a.uploadPercent[i]>0)}}var tt,nt,it,rt=[{path:"",component:Ee,children:[{path:"",component:u},{path:"user",loadChildren:function(){return r.e(8).then(r.bind(null,"gMfl")).then((function(e){return e.UserModule}))}},{path:"employee",loadChildren:function(){return r.e(7).then(r.bind(null,"f0dA")).then((function(e){return e.EmployeeModule}))}},{path:"packages-list",component:ge},{path:"packages-image/:id",component:se},{path:"packages-add",component:j},{path:"packages-add/:id",component:j},{path:"our-client-list",component:(nt=function(){function t(n,i,r){e(this,t),this.ourClientService=n,this.router=i,this.storage=r,this.showLoading=!0}return i(t,[{key:"ngOnInit",value:function(){this.getAllClient()}},{key:"getAllClient",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.showLoading=!0,e.next=3,this.ourClientService.ourClients$.subscribe((function(e){t.ourClients=e,t.showLoading=!1}));case 3:case"end":return e.stop()}}),e,this)})))}},{key:"onEdit",value:function(e){this.router.navigate(["/dashboard/our-client-add",e])}},{key:"onDelete",value:function(e){if(confirm("Are you sure to delete")){for(var t=this.ourClients.find((function(t){return t.id===e})).imageUrls,n=0;n<t.length;n++)this.storage.storage.refFromURL(t[n]).delete();this.ourClientService.delete(e).then((function(e){console.log("Client Deleted successfully")}))}}}]),t}(),nt.\u0275fac=function(e){return new(e||nt)(c.Mb(Be.a),c.Mb(a.b),c.Mb(ne.a))},nt.\u0275cmp=c.Gb({type:nt,selectors:[["app-our-client-list"]],decls:24,vars:2,consts:[[1,"container-fluid"],[1,"text-center"],[1,"row","mx-1"],[1,"table-responsive"],[1,"table","table-hover"],[1,"table-primary"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"btn","btn-sm","btn-primary",3,"routerLink"],[1,"btn","btn-sm","btn-warning",3,"click"],[1,"btn","btn-sm","btn-danger",3,"click"],["colspan","7"],[1,"loading"],[1,"fa","fa-refresh"]],template:function(e,t){1&e&&(c.Rb(0,"div",0),c.Rb(1,"h3",1),c.xc(2,"Our Client List"),c.Qb(),c.Rb(3,"div",2),c.Rb(4,"div",3),c.Rb(5,"table",4),c.Rb(6,"thead"),c.Rb(7,"tr",5),c.Rb(8,"th"),c.xc(9,"Event Date"),c.Qb(),c.Rb(10,"th"),c.xc(11,"Title"),c.Qb(),c.Rb(12,"th"),c.xc(13,"Institute"),c.Qb(),c.Rb(14,"th"),c.xc(15,"Active"),c.Qb(),c.Rb(16,"th"),c.xc(17,"Image"),c.Qb(),c.Rb(18,"th"),c.xc(19,"Edit"),c.Qb(),c.Rb(20,"th"),c.xc(21,"Delete"),c.Qb(),c.Qb(),c.Qb(),c.vc(22,He,2,1,"tbody",6),c.vc(23,Xe,5,0,"tr",6),c.Qb(),c.Qb(),c.Qb(),c.Qb()),2&e&&(c.zb(22),c.jc("ngIf",!t.showLoading),c.zb(1),c.jc("ngIf",t.showLoading))},directives:[g.n,g.m,a.c],styles:[""]}),nt)},{path:"our-client-image/:id",component:(tt=function(){function t(n,i,r,o,a){e(this,t),this.ourClientService=n,this.ng2ImgMax=i,this.sanitizer=r,this.route=o,this.storage=a,this.image=[],this.url=[],this.imageUrls=[],this.uploadPercent=[],this.resizing=!1,this.uploading=!1,this.showBusy=!1,this.id=this.route.snapshot.paramMap.get("id");for(var s=0;s<10;s++)this.imageUrls.push(""),this.image.push(),this.uploadPercent.push(0),this.url.push("ourclient/"+this.id+"/"+s)}return i(t,[{key:"ngOnInit",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.id,!e.t0){e.next=5;break}return this.showBusy=!0,e.next=5,this.ourClientService.ourClients$.subscribe((function(e){if(t.ourClient=e.find((function(e){return e.id==t.id})),t.ourClient.imageUrls)t.ourClient.imageUrls.forEach((function(e,n){t.imageUrls[n]=e}));else for(var n=0;n<10;n++)t.ourClient.imageUrls=t.imageUrls;t.showBusy=!1}),(function(e){return console.log(e)}));case 5:case"end":return e.stop()}}),e,this)})))}},{key:"fileChange",value:function(e,t){this.resizing=!0,this.resizeImage(e.target.files[0],800,600,t)}},{key:"resizeImage",value:function(e,t,n,i){var r=this;this.ng2ImgMax.resizeImage(e,t,n).subscribe((function(e){r.image[i]=e,r.previewFile(i)}),(function(e){console.log("\ud83d\ude22 Image Resize error!!",e)}))}},{key:"previewFile",value:function(e){var t=this,n=new FileReader;n.onload=function(n){t.imageUrls[e]=n.target.result,t.resizing=!1},n.readAsDataURL(this.image[e])}},{key:"startUpload",value:function(e){var t=this;this.uploading=!0;var n=this.storage.ref(this.url[e]),i=this.storage.upload(this.url[e],this.image[e]);i.percentageChanges().subscribe((function(n){t.uploadPercent[e]=n.valueOf()})),i.snapshotChanges().pipe(Object(ee.a)((function(){t.downloadURL=n.getDownloadURL(),t.downloadURL.subscribe((function(n){t.ourClient.imageUrls[e]=n,t.ourClientService.update(t.id,t.ourClient).then((function(e){console.log("\ud83d\ude22 Image url updated"),t.uploading=!1}))}))}))).subscribe()}}]),t}(),tt.\u0275fac=function(e){return new(e||tt)(c.Mb(Be.a),c.Mb(K),c.Mb(te.b),c.Mb(a.a),c.Mb(ne.a))},tt.\u0275cmp=c.Gb({type:tt,selectors:[["app-our-client-image"]],decls:2,vars:1,consts:[[1,"container-fluid","pb-3"],["class","row image-row",4,"ngFor","ngForOf"],[1,"row","image-row"],[1,"col-md-6","col-12","py-3"],[4,"ngIf","ngIfElse"],["croping",""],["type","file","placeholder","Upload file","accept","image/x-png,image/gif,image/jpeg",3,"change"],["class","my-3",4,"ngIf","ngIfElse"],[4,"ngIf"],["sending",""],["class","img-thumbnail","alt","No image yet","style","height: 200px; width: auto;",3,"src",4,"ngIf"],["alt","No image yet",1,"img-thumbnail",2,"height","200px","width","auto",3,"src"],[1,"loading"],[1,"fa","fa-refresh"],[1,"my-3"],["routerLink","/dashboard/our-client-list",1,"btn","btn-outline-danger","btn-sm","mx-1"],["type","button","class","btn btn-outline-primary btn-sm mx-1",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-primary","btn-sm","mx-1",3,"click"]],template:function(e,t){1&e&&(c.Rb(0,"div",0),c.vc(1,et,13,6,"div",1),c.Qb()),2&e&&(c.zb(1),c.jc("ngForOf",t.imageUrls))},directives:[g.m,g.n,a.c],styles:[".image-row[_ngcontent-%COMP%]{border-bottom:1px solid #2c303a}"]}),tt)},{path:"our-client-add",component:Ge},{path:"our-client-add/:id",component:Ge}]},{path:"**",redirectTo:"/dashboard"}],ot=((it=function t(){e(this,t)}).\u0275mod=c.Kb({type:it}),it.\u0275inj=c.Jb({factory:function(e){return new(e||it)},imports:[[s.a,$,a.d.forChild(rt)]]}),it)},b0Xh:function(e,t,i){var r;(function(){var i=function e(t){return t instanceof e?t:this instanceof e?void(this.EXIFwrapped=t):new e(t)};e.exports&&(t=e.exports=i),t.EXIF=i;var o=i.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},a=i.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},s=i.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},c=i.IFD1Tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",296:"ResolutionUnit",513:"JpegIFOffset",514:"JpegIFByteCount",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite"},u=i.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function l(e){return!!e.exifdata}function f(e){var t=new DataView(e);if(255!=t.getUint8(0)||216!=t.getUint8(1))return!1;for(var n=2,i=e.byteLength;n<i;){if(255!=t.getUint8(n))return!1;if(225==t.getUint8(n+1))return p(t,n+4,t.getUint16(n+2));n+=2+t.getUint16(n+2)}}var d={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function g(e,t,n){for(var i,r,o,a,s=new DataView(e),c={},u=t;u<t+n;)28===s.getUint8(u)&&2===s.getUint8(u+1)&&(a=s.getUint8(u+2))in d&&(o=s.getInt16(u+3),r=d[a],i=m(s,u+5,o),c.hasOwnProperty(r)?c[r]instanceof Array?c[r].push(i):c[r]=[c[r],i]:c[r]=i),u++;return c}function b(e,t,n,i,r){var o,a,s=e.getUint16(n,!r),c={};for(a=0;a<s;a++)c[i[e.getUint16(o=n+12*a+2,!r)]]=h(e,o,t,0,r);return c}function h(e,t,n,i,r){var o,a,s,c,u,l,f=e.getUint16(t+2,!r),d=e.getUint32(t+4,!r),g=e.getUint32(t+8,!r)+n;switch(f){case 1:case 7:if(1==d)return e.getUint8(t+8,!r);for(o=d>4?g:t+8,a=[],c=0;c<d;c++)a[c]=e.getUint8(o+c);return a;case 2:return m(e,o=d>4?g:t+8,d-1);case 3:if(1==d)return e.getUint16(t+8,!r);for(o=d>2?g:t+8,a=[],c=0;c<d;c++)a[c]=e.getUint16(o+2*c,!r);return a;case 4:if(1==d)return e.getUint32(t+8,!r);for(a=[],c=0;c<d;c++)a[c]=e.getUint32(g+4*c,!r);return a;case 5:if(1==d)return u=e.getUint32(g,!r),l=e.getUint32(g+4,!r),(s=new Number(u/l)).numerator=u,s.denominator=l,s;for(a=[],c=0;c<d;c++)u=e.getUint32(g+8*c,!r),l=e.getUint32(g+4+8*c,!r),a[c]=new Number(u/l),a[c].numerator=u,a[c].denominator=l;return a;case 9:if(1==d)return e.getInt32(t+8,!r);for(a=[],c=0;c<d;c++)a[c]=e.getInt32(g+4*c,!r);return a;case 10:if(1==d)return e.getInt32(g,!r)/e.getInt32(g+4,!r);for(a=[],c=0;c<d;c++)a[c]=e.getInt32(g+8*c,!r)/e.getInt32(g+4+8*c,!r);return a}}function m(e,t,i){var r="";for(n=t;n<t+i;n++)r+=String.fromCharCode(e.getUint8(n));return r}function p(e,t){if("Exif"!=m(e,t,4))return!1;var n,i,r,l,f,d=t+6;if(18761==e.getUint16(d))n=!1;else{if(19789!=e.getUint16(d))return!1;n=!0}if(42!=e.getUint16(d+2,!n))return!1;var g=e.getUint32(d+4,!n);if(g<8)return!1;if((i=b(e,d,d+g,a,n)).ExifIFDPointer)for(r in l=b(e,d,d+i.ExifIFDPointer,o,n)){switch(r){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":l[r]=u[r][l[r]];break;case"ExifVersion":case"FlashpixVersion":l[r]=String.fromCharCode(l[r][0],l[r][1],l[r][2],l[r][3]);break;case"ComponentsConfiguration":l[r]=u.Components[l[r][0]]+u.Components[l[r][1]]+u.Components[l[r][2]]+u.Components[l[r][3]]}i[r]=l[r]}if(i.GPSInfoIFDPointer)for(r in f=b(e,d,d+i.GPSInfoIFDPointer,s,n)){switch(r){case"GPSVersionID":f[r]=f[r][0]+"."+f[r][1]+"."+f[r][2]+"."+f[r][3]}i[r]=f[r]}return i.thumbnail=function(e,t,n,i){var r=function(e,t,n){var i=e.getUint16(t,!n);return e.getUint32(t+2+12*i,!n)}(e,t+n,i);if(!r)return{};if(r>e.byteLength)return{};var o=b(e,t,t+r,c,i);if(o.Compression)switch(o.Compression){case 6:o.JpegIFOffset&&o.JpegIFByteCount&&(o.blob=new Blob([new Uint8Array(e.buffer,t+o.JpegIFOffset,o.JpegIFByteCount)],{type:"image/jpeg"}));break;case 1:console.log("Thumbnail image format is TIFF, which is not implemented.");break;default:console.log("Unknown thumbnail image format '%s'",o.Compression)}else 2==o.PhotometricInterpretation&&console.log("Thumbnail image format is RGB, which is not implemented.");return o}(e,d,g,n),i}function A(e){var t={};if(1==e.nodeType){if(e.attributes.length>0){t["@attributes"]={};for(var n=0;n<e.attributes.length;n++){var i=e.attributes.item(n);t["@attributes"][i.nodeName]=i.nodeValue}}}else if(3==e.nodeType)return e.nodeValue;if(e.hasChildNodes())for(var r=0;r<e.childNodes.length;r++){var o=e.childNodes.item(r),a=o.nodeName;if(null==t[a])t[a]=A(o);else{if(null==t[a].push){var s=t[a];t[a]=[],t[a].push(s)}t[a].push(A(o))}}return t}function v(e){try{var t={};if(e.children.length>0)for(var n=0;n<e.children.length;n++){var i=e.children.item(n),r=i.attributes;for(var o in r){var a=r[o],s=a.nodeName;void 0!==s&&(t[s]=a.nodeValue)}var c=i.nodeName;if(void 0===t[c])t[c]=A(i);else{if(void 0===t[c].push){var u=t[c];t[c]=[],t[c].push(u)}t[c].push(A(i))}}else t=e.textContent;return t}catch(l){console.log(l.message)}}i.enableXmp=function(){i.isXmpEnabled=!0},i.disableXmp=function(){i.isXmpEnabled=!1},i.getData=function(e,t){return!((self.Image&&e instanceof self.Image||self.HTMLImageElement&&e instanceof self.HTMLImageElement)&&!e.complete||(l(e)?t&&t.call(e):function(e,t){function n(n){var r=f(n);e.exifdata=r||{};var o=function(e){var t=new DataView(e);if(255!=t.getUint8(0)||216!=t.getUint8(1))return!1;for(var n=2,i=e.byteLength,r=function(e,t){return 56===e.getUint8(t)&&66===e.getUint8(t+1)&&73===e.getUint8(t+2)&&77===e.getUint8(t+3)&&4===e.getUint8(t+4)&&4===e.getUint8(t+5)};n<i;){if(r(t,n)){var o=t.getUint8(n+7);return o%2!=0&&(o+=1),0===o&&(o=4),g(e,n+8+o,t.getUint16(n+6+o))}n++}}(n);if(e.iptcdata=o||{},i.isXmpEnabled){var a=function(e){if("DOMParser"in self){var t=new DataView(e);if(255!=t.getUint8(0)||216!=t.getUint8(1))return!1;for(var n=2,i=e.byteLength,r=new DOMParser;n<i-4;){if("http"==m(t,n,4)){var o=n-1,a=t.getUint16(n-2)-1,s=m(t,o,a),c=s.indexOf("xmpmeta>")+8,u=(s=s.substring(s.indexOf("<x:xmpmeta"),c)).indexOf("x:xmpmeta")+10;return s=s.slice(0,u)+'xmlns:Iptc4xmpCore="http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tiff="http://ns.adobe.com/tiff/1.0/" xmlns:plus="http://schemas.android.com/apk/lib/com.google.android.gms.plus" xmlns:ext="http://www.gettyimages.com/xsltExtension/1.0" xmlns:exif="http://ns.adobe.com/exif/1.0/" xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmlns:crs="http://ns.adobe.com/camera-raw-settings/1.0/" xmlns:xapGImg="http://ns.adobe.com/xap/1.0/g/img/" xmlns:Iptc4xmpExt="http://iptc.org/std/Iptc4xmpExt/2008-02-29/" '+s.slice(u),v(r.parseFromString(s,"text/xml"))}n++}}}(n);e.xmpdata=a||{}}t&&t.call(e)}if(e.src)if(/^data\:/i.test(e.src))n(function(e,t){t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"",e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var n=atob(e),i=n.length,r=new ArrayBuffer(i),o=new Uint8Array(r),a=0;a<i;a++)o[a]=n.charCodeAt(a);return r}(e.src));else if(/^blob\:/i.test(e.src))(o=new FileReader).onload=function(e){n(e.target.result)},function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.onload=function(e){200!=this.status&&0!==this.status||o.readAsArrayBuffer(this.response)},n.send()}(e.src);else{var r=new XMLHttpRequest;r.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";n(r.response),r=null},r.open("GET",e.src,!0),r.responseType="arraybuffer",r.send(null)}else if(self.FileReader&&(e instanceof self.Blob||e instanceof self.File)){var o;(o=new FileReader).onload=function(e){n(e.target.result)},o.readAsArrayBuffer(e)}}(e,t),0))},i.getTag=function(e,t){if(l(e))return e.exifdata[t]},i.getIptcTag=function(e,t){if(l(e))return e.iptcdata[t]},i.getAllTags=function(e){if(!l(e))return{};var t,n=e.exifdata,i={};for(t in n)n.hasOwnProperty(t)&&(i[t]=n[t]);return i},i.getAllIptcTags=function(e){if(!l(e))return{};var t,n=e.iptcdata,i={};for(t in n)n.hasOwnProperty(t)&&(i[t]=n[t]);return i},i.pretty=function(e){if(!l(e))return"";var t,n=e.exifdata,i="";for(t in n)n.hasOwnProperty(t)&&(i+="object"==typeof n[t]?n[t]instanceof Number?t+" : "+n[t]+" ["+n[t].numerator+"/"+n[t].denominator+"]\r\n":t+" : ["+n[t].length+" values]\r\n":t+" : "+n[t]+"\r\n");return i},i.readFromBinaryFile=function(e){return f(e)},void 0===(r=(function(){return i}).apply(t,[]))||(e.exports=r)}).call(this)},gkvR:function(e,t,n){e.exports=function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};t[a][0].call(u.exports,(function(e){return r(t[a][1][e]||e)}),u,u.exports,e,t,n,i)}return n[a].exports}for(var o=!1,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,t,n){"use strict";var i=e("inherits"),r=e("multimath"),o=e("multimath/lib/unsharp_mask"),a=e("./mm_resize");function s(e){var t=e||[],n={js:t.indexOf("js")>=0,wasm:t.indexOf("wasm")>=0};r.call(this,n),this.features={js:n.js,wasm:n.wasm&&this.has_wasm()},this.use(o),this.use(a)}i(s,r),s.prototype.resizeAndUnsharp=function(e,t){var n=this.resize(e,t);return e.unsharpAmount&&this.unsharp_mask(n,e.toWidth,e.toHeight,e.unsharpAmount,e.unsharpRadius,e.unsharpThreshold),n},t.exports=s},{"./mm_resize":4,inherits:15,multimath:16,"multimath/lib/unsharp_mask":19}],2:[function(e,t,n){"use strict";function i(e){return e<0?0:e>255?255:e}t.exports={convolveHorizontally:function(e,t,n,r,o,a){var s,c,u,l,f,d,g,b,h,m,p,A=0,v=0;for(h=0;h<r;h++){for(f=0,m=0;m<o;m++){for(d=a[f++],g=a[f++],b=A+4*d|0,s=c=u=l=0;g>0;g--)l=l+(p=a[f++])*e[b+3]|0,u=u+p*e[b+2]|0,c=c+p*e[b+1]|0,s=s+p*e[b]|0,b=b+4|0;t[v+3]=i(l+8192>>14),t[v+2]=i(u+8192>>14),t[v+1]=i(c+8192>>14),t[v]=i(s+8192>>14),v=v+4*r|0}v=4*(h+1)|0,A=(h+1)*n*4|0}},convolveVertically:function(e,t,n,r,o,a){var s,c,u,l,f,d,g,b,h,m,p,A=0,v=0;for(h=0;h<r;h++){for(f=0,m=0;m<o;m++){for(d=a[f++],g=a[f++],b=A+4*d|0,s=c=u=l=0;g>0;g--)l=l+(p=a[f++])*e[b+3]|0,u=u+p*e[b+2]|0,c=c+p*e[b+1]|0,s=s+p*e[b]|0,b=b+4|0;t[v+3]=i(l+8192>>14),t[v+2]=i(u+8192>>14),t[v+1]=i(c+8192>>14),t[v]=i(s+8192>>14),v=v+4*r|0}v=4*(h+1)|0,A=(h+1)*n*4|0}}}},{}],3:[function(e,t,n){"use strict";t.exports="AGFzbQEAAAABFAJgBn9/f39/fwBgB39/f39/f38AAg8BA2VudgZtZW1vcnkCAAEDAwIAAQQEAXAAAAcZAghjb252b2x2ZQAACmNvbnZvbHZlSFYAAQkBAArmAwLBAwEQfwJAIANFDQAgBEUNACAFQQRqIRVBACEMQQAhDQNAIA0hDkEAIRFBACEHA0AgB0ECaiESAn8gBSAHQQF0IgdqIgZBAmouAQAiEwRAQQAhCEEAIBNrIRQgFSAHaiEPIAAgDCAGLgEAakECdGohEEEAIQlBACEKQQAhCwNAIBAoAgAiB0EYdiAPLgEAIgZsIAtqIQsgB0H/AXEgBmwgCGohCCAHQRB2Qf8BcSAGbCAKaiEKIAdBCHZB/wFxIAZsIAlqIQkgD0ECaiEPIBBBBGohECAUQQFqIhQNAAsgEiATagwBC0EAIQtBACEKQQAhCUEAIQggEgshByABIA5BAnRqIApBgMAAakEOdSIGQf8BIAZB/wFIG0EQdEGAgPwHcUEAIAZBAEobIAtBgMAAakEOdSIGQf8BIAZB/wFIG0EYdEEAIAZBAEobciAJQYDAAGpBDnUiBkH/ASAGQf8BSBtBCHRBgP4DcUEAIAZBAEobciAIQYDAAGpBDnUiBkH/ASAGQf8BSBtB/wFxQQAgBkEAShtyNgIAIA4gA2ohDiARQQFqIhEgBEcNAAsgDCACaiEMIA1BAWoiDSADRw0ACwsLIQACQEEAIAIgAyAEIAUgABAAIAJBACAEIAUgBiABEAALCw=="},{}],4:[function(e,t,n){"use strict";t.exports={name:"resize",fn:e("./resize"),wasm_fn:e("./resize_wasm"),wasm_src:e("./convolve_wasm_base64")}},{"./convolve_wasm_base64":3,"./resize":5,"./resize_wasm":8}],5:[function(e,t,n){"use strict";var i=e("./resize_filter_gen"),r=e("./convolve").convolveHorizontally,o=e("./convolve").convolveVertically;t.exports=function(e){var t=e.src,n=e.width,a=e.height,s=e.toWidth,c=e.toHeight,u=e.scaleX||e.toWidth/e.width,l=e.scaleY||e.toHeight/e.height,f=e.offsetX||0,d=e.offsetY||0,g=e.dest||new Uint8Array(s*c*4),b=void 0===e.quality?3:e.quality,h=e.alpha||!1,m=i(b,n,s,u,f),p=i(b,a,c,l,d),A=new Uint8Array(s*a*4);return r(t,A,n,a,s,m),o(A,g,a,s,c,p),h||function(e,t,n){for(var i=3,r=t*n*4|0;i<r;)e[i]=255,i=i+4|0}(g,s,c),g}},{"./convolve":2,"./resize_filter_gen":6}],6:[function(e,t,n){"use strict";var i=e("./resize_filter_info");function r(e){return Math.round(16383*e)}t.exports=function(e,t,n,o,a){var s,c,u,l,f,d,g,b,h,m,p,A,v,y,w,I,Q=i[e].filter,R=1/o,x=Math.min(1,o),C=i[e].win/x,k=Math.floor(2*(C+1)),E=new Int16Array((k+2)*n),B=0,S=!E.subarray||!E.set;for(s=0;s<n;s++){for(c=(s+.5)*R+a,u=Math.max(0,Math.floor(c-C)),f=(l=Math.min(t-1,Math.ceil(c+C)))-u+1,d=new Float32Array(f),g=new Int16Array(f),b=0,h=u,m=0;h<=l;h++,m++)b+=p=Q((h+.5-c)*x),d[m]=p;for(A=0,m=0;m<d.length;m++)A+=v=d[m]/b,g[m]=r(v);for(g[n>>1]+=r(1-A),y=0;y<g.length&&0===g[y];)y++;if(y<g.length){for(w=g.length-1;w>0&&0===g[w];)w--;if(I=w-y+1,E[B++]=u+y,E[B++]=I,S)for(m=y;m<=w;m++)E[B++]=g[m];else E.set(g.subarray(y,w+1),B),B+=I}else E[B++]=0,E[B++]=0}return E}},{"./resize_filter_info":7}],7:[function(e,t,n){"use strict";t.exports=[{win:.5,filter:function(e){return e>=-.5&&e<.5?1:0}},{win:1,filter:function(e){if(e<=-1||e>=1)return 0;if(e>-1.1920929e-7&&e<1.1920929e-7)return 1;var t=e*Math.PI;return Math.sin(t)/t*(.54+.46*Math.cos(t/1))}},{win:2,filter:function(e){if(e<=-2||e>=2)return 0;if(e>-1.1920929e-7&&e<1.1920929e-7)return 1;var t=e*Math.PI;return Math.sin(t)/t*Math.sin(t/2)/(t/2)}},{win:3,filter:function(e){if(e<=-3||e>=3)return 0;if(e>-1.1920929e-7&&e<1.1920929e-7)return 1;var t=e*Math.PI;return Math.sin(t)/t*Math.sin(t/3)/(t/3)}}]},{}],8:[function(e,t,n){"use strict";var i=e("./resize_filter_gen"),r=!0;try{r=1===new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0]}catch(a){}function o(e,t,n){if(r)t.set(function(e){return new Uint8Array(e.buffer,0,e.byteLength)}(e),n);else for(var i=n,o=0;o<e.length;o++){var a=e[o];t[i++]=255&a,t[i++]=a>>8&255}}t.exports=function(e){var t=e.src,n=e.width,r=e.height,a=e.toWidth,s=e.toHeight,c=e.scaleX||e.toWidth/e.width,u=e.scaleY||e.toHeight/e.height,l=e.offsetX||0,f=e.offsetY||0,d=e.dest||new Uint8Array(a*s*4),g=void 0===e.quality?3:e.quality,b=e.alpha||!1,h=i(g,n,a,c,l),m=i(g,r,s,u,f),p=this.__align(0+Math.max(t.byteLength,d.byteLength)),A=this.__align(p+r*a*4),v=this.__align(A+h.byteLength),y=this.__instance("resize",v+m.byteLength),w=new Uint8Array(this.__memory.buffer),I=new Uint32Array(this.__memory.buffer),Q=new Uint32Array(t.buffer);return I.set(Q),o(h,w,A),o(m,w,v),(y.exports.convolveHV||y.exports._convolveHV)(A,v,p,n,r,a,s),new Uint32Array(d.buffer).set(new Uint32Array(this.__memory.buffer,0,s*a)),b||function(e,t,n){for(var i=3,r=t*n*4|0;i<r;)e[i]=255,i=i+4|0}(d,a,s),d}},{"./resize_filter_gen":6}],9:[function(e,t,n){"use strict";function i(e,t){this.create=e,this.available=[],this.acquired={},this.lastId=1,this.timeoutId=0,this.idle=t||2e3}i.prototype.acquire=function(){var e,t=this;return 0!==this.available.length?e=this.available.pop():((e=this.create()).id=this.lastId++,e.release=function(){return t.release(e)}),this.acquired[e.id]=e,e},i.prototype.release=function(e){var t=this;delete this.acquired[e.id],e.lastUsed=Date.now(),this.available.push(e),0===this.timeoutId&&(this.timeoutId=setTimeout((function(){return t.gc()}),100))},i.prototype.gc=function(){var e=this,t=Date.now();this.available=this.available.filter((function(n){return!(t-n.lastUsed>e.idle&&(n.destroy(),1))})),this.timeoutId=0!==this.available.length?setTimeout((function(){return e.gc()}),100):0},t.exports=i},{}],10:[function(e,t,n){"use strict";t.exports=function(e,t,n,i,r,o){var a=(2*o+2+1)/r;if(a>.5)return[[n,i]];var s=Math.ceil(Math.log(Math.min(n/e,i/t))/Math.log(a));if(s<=1)return[[n,i]];for(var c=[],u=0;u<s;u++){var l=Math.round(Math.pow(Math.pow(e,s-u-1)*Math.pow(n,u+1),1/s)),f=Math.round(Math.pow(Math.pow(t,s-u-1)*Math.pow(i,u+1),1/s));c.push([l,f])}return c}},{}],11:[function(e,t,n){"use strict";function i(e){var t=Math.round(e);return Math.abs(e-t)<1e-5?t:Math.floor(e)}function r(e){var t=Math.round(e);return Math.abs(e-t)<1e-5?t:Math.ceil(e)}t.exports=function(e){var t,n,o,a,s,c,u=e.toWidth/e.width,l=e.toHeight/e.height,f=i(e.srcTileSize*u)-2*e.destTileBorder,d=i(e.srcTileSize*l)-2*e.destTileBorder;if(f<1||d<1)throw new Error("Internal error in pica: target tile width/height is too small.");var g,b=[];for(a=0;a<e.toHeight;a+=d)for(o=0;o<e.toWidth;o+=f)(t=o-e.destTileBorder)<0&&(t=0),t+(s=o+f+e.destTileBorder-t)>=e.toWidth&&(s=e.toWidth-t),(n=a-e.destTileBorder)<0&&(n=0),n+(c=a+d+e.destTileBorder-n)>=e.toHeight&&(c=e.toHeight-n),g={toX:t,toY:n,toWidth:s,toHeight:c,toInnerX:o,toInnerY:a,toInnerWidth:f,toInnerHeight:d,offsetX:t/u-i(t/u),offsetY:n/l-i(n/l),scaleX:u,scaleY:l,x:i(t/u),y:i(n/l),width:r(s/u),height:r(c/l)},b.push(g);return b}},{}],12:[function(e,t,n){"use strict";function i(e){return Object.prototype.toString.call(e)}t.exports.isCanvas=function(e){var t=i(e);return"[object HTMLCanvasElement]"===t||"[object Canvas]"===t},t.exports.isImage=function(e){return"[object HTMLImageElement]"===i(e)},t.exports.limiter=function(e){var t=0,n=[];function i(){t<e&&n.length&&(t++,n.shift()())}return function(e){return new Promise((function(r,o){n.push((function(){e().then((function(e){r(e),t--,i()}),(function(e){o(e),t--,i()}))})),i()}))}},t.exports.cib_quality_name=function(e){switch(e){case 0:return"pixelated";case 1:return"low";case 2:return"medium"}return"high"},t.exports.cib_support=function(){return Promise.resolve().then((function(){if("undefined"==typeof createImageBitmap||"undefined"==typeof document)return!1;var e=document.createElement("canvas");return e.width=100,e.height=100,createImageBitmap(e,0,0,100,100,{resizeWidth:10,resizeHeight:10,resizeQuality:"high"}).then((function(t){var n=10===t.width;return t.close(),e=null,n}))})).catch((function(){return!1}))}},{}],13:[function(e,t,n){"use strict";t.exports=function(){var t,n=e("./mathlib");onmessage=function(e){var i=e.data.opts;t||(t=new n(e.data.features));var r=t.resizeAndUnsharp(i);postMessage({result:r},[r.buffer])}}},{"./mathlib":1}],14:[function(e,t,n){var i,r,o,a,s,c;function u(e,t,n,i,r,o){var a,s,c,u,l,f,d,g,b,h,m,p,A,v;for(b=0;b<o;b++){for(d=b,g=0,u=l=(a=e[f=b*r])*i[6],m=i[0],p=i[1],A=i[4],v=i[5],h=0;h<r;h++)c=(s=e[f])*m+a*p+u*A+l*v,l=u,a=s,n[g]=u=c,g++,f++;for(g--,d+=o*(r-1),u=l=(a=e[--f])*i[7],s=a,m=i[2],p=i[3],h=r-1;h>=0;h--)c=s*m+a*p+u*A+l*v,l=u,a=s,s=e[f],t[d]=n[g]+(u=c),f--,g--,d-=o}}t.exports=function(e,t,n,l){if(l){var f=new Uint16Array(e.length),d=new Float32Array(Math.max(t,n)),g=function(e){e<.5&&(e=.5);var t=Math.exp(.527076)/e,n=Math.exp(-t),u=Math.exp(-2*t),l=(1-n)*(1-n)/(1+2*t*n-u);return i=l,r=l*(t-1)*n,o=l*(t+1)*n,a=-l*u,s=2*n,c=-u,new Float32Array([i,r,o,a,s,c,(i+r)/(1-s-c),(o+a)/(1-s-c)])}(l);u(e,f,d,g,t,n),u(f,e,d,g,n,t)}}},{}],15:[function(e,t,n){t.exports="function"==typeof Object.create?function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},{}],16:[function(e,t,n){"use strict";var i=e("object-assign"),r=e("./lib/base64decode"),o=e("./lib/wa_detect"),a={js:!0,wasm:!0};function s(e){if(!(this instanceof s))return new s(e);var t=i({},a,e||{});if(this.options=t,this.__cache={},this.__init_promise=null,this.__modules=t.modules||{},this.__memory=null,this.__wasm={},this.__isLE=1===new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0],!this.options.js&&!this.options.wasm)throw new Error('mathlib: at least "js" or "wasm" should be enabled')}s.prototype.has_wasm=o,s.prototype.use=function(e){return this.__modules[e.name]=e,this[e.name]=this.options.wasm&&this.has_wasm()&&e.wasm_fn?e.wasm_fn:e.fn,this},s.prototype.init=function(){if(this.__init_promise)return this.__init_promise;if(!this.options.js&&this.options.wasm&&!this.has_wasm())return Promise.reject(new Error('mathlib: only "wasm" was enabled, but it\'s not supported'));var e=this;return this.__init_promise=Promise.all(Object.keys(e.__modules).map((function(t){var n=e.__modules[t];return e.options.wasm&&e.has_wasm()&&n.wasm_fn?e.__wasm[t]?null:WebAssembly.compile(e.__base64decode(n.wasm_src)).then((function(n){e.__wasm[t]=n})):null}))).then((function(){return e})),this.__init_promise},s.prototype.__base64decode=r,s.prototype.__reallocate=function(e){if(!this.__memory)return this.__memory=new WebAssembly.Memory({initial:Math.ceil(e/65536)}),this.__memory;var t=this.__memory.buffer.byteLength;return t<e&&this.__memory.grow(Math.ceil((e-t)/65536)),this.__memory},s.prototype.__instance=function(e,t,n){if(t&&this.__reallocate(t),this.__wasm[e]||(this.__wasm[e]=new WebAssembly.Module(this.__base64decode(this.__modules[e].wasm_src))),!this.__cache[e]){var r={memoryBase:0,memory:this.__memory,tableBase:0,table:new WebAssembly.Table({initial:0,element:"anyfunc"})};this.__cache[e]=new WebAssembly.Instance(this.__wasm[e],{env:i(r,n||{})})}return this.__cache[e]},s.prototype.__align=function(e,t){var n=e%(t=t||8);return e+(n?t-n:0)},t.exports=s},{"./lib/base64decode":17,"./lib/wa_detect":23,"object-assign":24}],17:[function(e,t,n){"use strict";t.exports=function(e){for(var t=e.replace(/[\r\n=]/g,""),n=t.length,i=new Uint8Array(3*n>>2),r=0,o=0,a=0;a<n;a++)a%4==0&&a&&(i[o++]=r>>16&255,i[o++]=r>>8&255,i[o++]=255&r),r=r<<6|"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(t.charAt(a));var s=n%4*6;return 0===s?(i[o++]=r>>16&255,i[o++]=r>>8&255,i[o++]=255&r):18===s?(i[o++]=r>>10&255,i[o++]=r>>2&255):12===s&&(i[o++]=r>>4&255),i}},{}],18:[function(e,t,n){"use strict";t.exports=function(e,t,n){for(var i,r,o,a=t*n,s=new Uint16Array(a),c=0;c<a;c++)o=e[4*c+2],s[c]=257*(((i=e[4*c])>=(r=e[4*c+1])&&i>=o?i:r>=o&&r>=i?r:o)+(i<=r&&i<=o?i:r<=o&&r<=i?r:o))>>1;return s}},{}],19:[function(e,t,n){"use strict";t.exports={name:"unsharp_mask",fn:e("./unsharp_mask"),wasm_fn:e("./unsharp_mask_wasm"),wasm_src:e("./unsharp_mask_wasm_base64")}},{"./unsharp_mask":20,"./unsharp_mask_wasm":21,"./unsharp_mask_wasm_base64":22}],20:[function(e,t,n){"use strict";var i=e("glur/mono16"),r=e("./hsl_l16");t.exports=function(e,t,n,o,a,s){var c,u,l,f,d,g,b,h,m,p,A,v,y;if(!(0===o||a<.5)){a>2&&(a=2);var w=r(e,t,n),I=new Uint16Array(w);i(I,t,n,a);for(var Q=o/100*4096+.5|0,R=257*s|0,x=t*n,C=0;C<x;C++)v=2*(w[C]-I[C]),Math.abs(v)>=R&&(l=e[2+(y=4*C)],g=257*((h=(c=e[y])>=(u=e[y+1])&&c>=l?c:u>=c&&u>=l?u:l)+(b=c<=u&&c<=l?c:u<=c&&u<=l?u:l))>>1,b===h?f=d=0:(d=g<=32767?4095*(h-b)/(h+b)|0:4095*(h-b)/(510-h-b)|0,f=c===h?65535*(u-l)/(6*(h-b))|0:u===h?21845+(65535*(l-c)/(6*(h-b))|0):43690+(65535*(c-u)/(6*(h-b))|0)),(g+=Q*v+2048>>12)>65535?g=65535:g<0&&(g=0),0===d?c=u=l=g>>8:(m=2*g-(p=g<=32767?g*(4096+d)+2048>>12:g+((65535-g)*d+2048>>12))>>8,p>>=8,c=(A=f+21845&65535)>=43690?m:A>=32767?m+(6*(p-m)*(43690-A)+32768>>16):A>=10922?p:m+(6*(p-m)*A+32768>>16),u=(A=65535&f)>=43690?m:A>=32767?m+(6*(p-m)*(43690-A)+32768>>16):A>=10922?p:m+(6*(p-m)*A+32768>>16),l=(A=f-21845&65535)>=43690?m:A>=32767?m+(6*(p-m)*(43690-A)+32768>>16):A>=10922?p:m+(6*(p-m)*A+32768>>16)),e[y]=c,e[y+1]=u,e[y+2]=l)}}},{"./hsl_l16":18,"glur/mono16":14}],21:[function(e,t,n){"use strict";t.exports=function(e,t,n,i,r,o){if(!(0===i||r<.5)){r>2&&(r=2);var a=t*n,s=4*a,c=2*a,u=2*a,l=4*Math.max(t,n),f=s,d=f+c,g=d+u,b=g+u,h=b+l,m=this.__instance("unsharp_mask",s+c+2*u+l+32,{exp:Math.exp}),p=new Uint32Array(e.buffer);new Uint32Array(this.__memory.buffer).set(p);var A=m.exports.hsl_l16||m.exports._hsl_l16;A(0,f,t,n),(A=m.exports.blurMono16||m.exports._blurMono16)(f,d,g,b,h,t,n,r),(A=m.exports.unsharp||m.exports._unsharp)(0,0,f,d,t,n,i,o),p.set(new Uint32Array(this.__memory.buffer,0,a))}}},{}],22:[function(e,t,n){"use strict";t.exports="AGFzbQEAAAABMQZgAXwBfGACfX8AYAZ/f39/f38AYAh/f39/f39/fQBgBH9/f38AYAh/f39/f39/fwACGQIDZW52A2V4cAAAA2VudgZtZW1vcnkCAAEDBgUBAgMEBQQEAXAAAAdMBRZfX2J1aWxkX2dhdXNzaWFuX2NvZWZzAAEOX19nYXVzczE2X2xpbmUAAgpibHVyTW9ubzE2AAMHaHNsX2wxNgAEB3Vuc2hhcnAABQkBAAqJEAXZAQEGfAJAIAFE24a6Q4Ia+z8gALujIgOaEAAiBCAEoCIGtjgCECABIANEAAAAAAAAAMCiEAAiBbaMOAIUIAFEAAAAAAAA8D8gBKEiAiACoiAEIAMgA6CiRAAAAAAAAPA/oCAFoaMiArY4AgAgASAEIANEAAAAAAAA8L+gIAKioiIHtjgCBCABIAQgA0QAAAAAAADwP6AgAqKiIgO2OAIIIAEgBSACoiIEtow4AgwgASACIAegIAVEAAAAAAAA8D8gBqGgIgKjtjgCGCABIAMgBKEgAqO2OAIcCwu3AwMDfwR9CHwCQCADKgIUIQkgAyoCECEKIAMqAgwhCyADKgIIIQwCQCAEQX9qIgdBAEgiCA0AIAIgAC8BALgiDSADKgIYu6IiDiAJuyIQoiAOIAq7IhGiIA0gAyoCBLsiEqIgAyoCALsiEyANoqCgoCIPtjgCACACQQRqIQIgAEECaiEAIAdFDQAgBCEGA0AgAiAOIBCiIA8iDiARoiANIBKiIBMgAC8BALgiDaKgoKAiD7Y4AgAgAkEEaiECIABBAmohACAGQX9qIgZBAUoNAAsLAkAgCA0AIAEgByAFbEEBdGogAEF+ai8BACIIuCINIAu7IhGiIA0gDLsiEqKgIA0gAyoCHLuiIg4gCrsiE6KgIA4gCbsiFKKgIg8gAkF8aioCALugqzsBACAHRQ0AIAJBeGohAiAAQXxqIQBBACAFQQF0ayEHIAEgBSAEQQF0QXxqbGohBgNAIAghAyAALwEAIQggBiANIBGiIAO4Ig0gEqKgIA8iECAToqAgDiAUoqAiDyACKgIAu6CrOwEAIAYgB2ohBiAAQX5qIQAgAkF8aiECIBAhDiAEQX9qIgRBAUoNAAsLCwvfAgIDfwZ8AkAgB0MAAAAAWw0AIARE24a6Q4Ia+z8gB0MAAAA/l7ujIgyaEAAiDSANoCIPtjgCECAEIAxEAAAAAAAAAMCiEAAiDraMOAIUIAREAAAAAAAA8D8gDaEiCyALoiANIAwgDKCiRAAAAAAAAPA/oCAOoaMiC7Y4AgAgBCANIAxEAAAAAAAA8L+gIAuioiIQtjgCBCAEIA0gDEQAAAAAAADwP6AgC6KiIgy2OAIIIAQgDiALoiINtow4AgwgBCALIBCgIA5EAAAAAAAA8D8gD6GgIgujtjgCGCAEIAwgDaEgC6O2OAIcIAYEQCAFQQF0IQogBiEJIAIhCANAIAAgCCADIAQgBSAGEAIgACAKaiEAIAhBAmohCCAJQX9qIgkNAAsLIAVFDQAgBkEBdCEIIAUhAANAIAIgASADIAQgBiAFEAIgAiAIaiECIAFBAmohASAAQX9qIgANAAsLC7wBAQV/IAMgAmwiAwRAQQAgA2shBgNAIAAoAgAiBEEIdiIHQf8BcSECAn8gBEH/AXEiAyAEQRB2IgRB/wFxIgVPBEAgAyIIIAMgAk8NARoLIAQgBCAHIAIgA0kbIAIgBUkbQf8BcQshCAJAIAMgAk0EQCADIAVNDQELIAQgByAEIAMgAk8bIAIgBUsbQf8BcSEDCyAAQQRqIQAgASADIAhqQYECbEEBdjsBACABQQJqIQEgBkEBaiIGDQALCwvTBgEKfwJAIAazQwAAgEWUQwAAyEKVu0QAAAAAAADgP6CqIQ0gBSAEbCILBEAgB0GBAmwhDgNAQQAgAi8BACADLwEAayIGQQF0IgdrIAcgBkEASBsgDk8EQCAAQQJqLQAAIQUCfyAALQAAIgYgAEEBai0AACIESSIJRQRAIAYiCCAGIAVPDQEaCyAFIAUgBCAEIAVJGyAGIARLGwshCAJ/IAYgBE0EQCAGIgogBiAFTQ0BGgsgBSAFIAQgBCAFSxsgCRsLIgogCGoiD0GBAmwiEEEBdiERQQAhDAJ/QQAiCSAIIApGDQAaIAggCmsiCUH/H2wgD0H+AyAIayAKayAQQYCABEkbbSEMIAYgCEYEQCAEIAVrQf//A2wgCUEGbG0MAQsgBSAGayAGIARrIAQgCEYiBhtB//8DbCAJQQZsbUHVqgFBqtUCIAYbagshCSARIAcgDWxBgBBqQQx1aiIGQQAgBkEAShsiBkH//wMgBkH//wNIGyEGAkACfwJAIAxB//8DcSIFBEAgBkH//wFKDQEgBUGAIGogBmxBgBBqQQx2DAILIAZBCHYiBiEFIAYhBAwCCyAFIAZB//8Dc2xBgBBqQQx2IAZqCyIFQQh2IQcgBkEBdCAFa0EIdiIGIQQCQCAJQdWqAWpB//8DcSIFQanVAksNACAFQf//AU8EQEGq1QIgBWsgByAGa2xBBmxBgIACakEQdiAGaiEEDAELIAchBCAFQanVAEsNACAFIAcgBmtsQQZsQYCAAmpBEHYgBmohBAsCfyAGIgUgCUH//wNxIghBqdUCSw0AGkGq1QIgCGsgByAGa2xBBmxBgIACakEQdiAGaiAIQf//AU8NABogByIFIAhBqdUASw0AGiAIIAcgBmtsQQZsQYCAAmpBEHYgBmoLIQUgCUGr1QJqQf//A3EiCEGp1QJLDQAgCEH//wFPBEBBqtUCIAhrIAcgBmtsQQZsQYCAAmpBEHYgBmohBgwBCyAIQanVAEsEQCAHIQYMAQsgCCAHIAZrbEEGbEGAgAJqQRB2IAZqIQYLIAEgBDoAACABQQFqIAU6AAAgAUECaiAGOgAACyADQQJqIQMgAkECaiECIABBBGohACABQQRqIQEgC0F/aiILDQALCwsL"},{}],23:[function(e,t,n){"use strict";var i;t.exports=function(){if(void 0!==i)return i;if(i=!1,"undefined"==typeof WebAssembly)return i;try{var e=new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,1,127,1,127,3,2,1,0,5,3,1,0,1,7,8,1,4,116,101,115,116,0,0,10,16,1,14,0,32,0,65,1,54,2,0,32,0,40,2,0,11]),t=new WebAssembly.Module(e);return 0!==new WebAssembly.Instance(t,{}).exports.test(4)&&(i=!0),i}catch(n){}return i}},{}],24:[function(e,t,n){"use strict";var i=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}t.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(e){i[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(r){return!1}}()?Object.assign:function(e,t){for(var n,s,c=a(e),u=1;u<arguments.length;u++){for(var l in n=Object(arguments[u]))r.call(n,l)&&(c[l]=n[l]);if(i){s=i(n);for(var f=0;f<s.length;f++)o.call(n,s[f])&&(c[s[f]]=n[s[f]])}}return c}},{}],25:[function(e,t,n){var i=arguments[3],r=arguments[4],o=arguments[5],a=JSON.stringify;t.exports=function(e,t){for(var n,s=Object.keys(o),c=0,u=s.length;c<u;c++){var l=o[d=s[c]].exports;if(l===e||l&&l.default===e){n=d;break}}if(!n){n=Math.floor(Math.pow(16,8)*Math.random()).toString(16);var f={};for(c=0,u=s.length;c<u;c++){var d;f[d=s[c]]=d}r[n]=["function(require,module,exports){"+e+"(self); }",f]}var g=Math.floor(Math.pow(16,8)*Math.random()).toString(16),b={};b[n]=n,r[g]=["function(require,module,exports){var f = require("+a(n)+");(f.default ? f.default : f)(self);}",b];var h={};!function e(t){for(var n in h[t]=!0,r[t][1]){var i=r[t][1][n];h[i]||e(i)}}(g);var m="("+i+")({"+Object.keys(h).map((function(e){return a(e)+":["+r[e][0]+","+a(r[e][1])+"]"})).join(",")+"},{},["+a(g)+"])",p=window.URL||window.webkitURL||window.mozURL||window.msURL,A=new Blob([m],{type:"text/javascript"});if(t&&t.bare)return A;var v=p.createObjectURL(A),y=new Worker(v);return y.objectURL=v,y}},{}],"/":[function(e,t,n){"use strict";var i=e("object-assign"),r=e("webworkify"),o=e("./lib/mathlib"),a=e("./lib/pool"),s=e("./lib/utils"),c=e("./lib/worker"),u=e("./lib/stepper"),l=e("./lib/tiler"),f={},d=!1;try{"undefined"!=typeof navigator&&navigator.userAgent&&(d=navigator.userAgent.indexOf("Safari")>=0)}catch(y){}var g=1;"undefined"!=typeof navigator&&(g=Math.min(navigator.hardwareConcurrency||1,4));var b,h,m={tile:1024,concurrency:g,features:["js","wasm","ww"],idle:2e3},p={quality:3,alpha:!1,unsharpAmount:0,unsharpRadius:0,unsharpThreshold:0};function A(){return{value:r(c),destroy:function(){if(this.value.terminate(),"undefined"!=typeof window){var e=window.URL||window.webkitURL||window.mozURL||window.msURL;e&&e.revokeObjectURL&&this.value.objectURL&&e.revokeObjectURL(this.value.objectURL)}}}}function v(e){if(!(this instanceof v))return new v(e);this.options=i({},m,e||{});var t="lk_".concat(this.options.concurrency);this.__limit=f[t]||s.limiter(this.options.concurrency),f[t]||(f[t]=this.__limit),this.features={js:!1,wasm:!1,cib:!1,ww:!1},this.__workersPool=null,this.__requested_features=[],this.__mathlib=null}v.prototype.init=function(){var t=this;if(this.__initPromise)return this.__initPromise;if(!1!==b&&!0!==b&&(b=!1,"undefined"!=typeof ImageData&&"undefined"!=typeof Uint8ClampedArray))try{new ImageData(new Uint8ClampedArray(400),10,10),b=!0}catch(l){}!1!==h&&!0!==h&&(h=!1,"undefined"!=typeof ImageBitmap&&(ImageBitmap.prototype&&ImageBitmap.prototype.close?h=!0:this.debug("ImageBitmap does not support .close(), disabled")));var n=this.options.features.slice();if(n.indexOf("all")>=0&&(n=["cib","wasm","js","ww"]),this.__requested_features=n,this.__mathlib=new o(n),n.indexOf("ww")>=0&&"undefined"!=typeof window&&"Worker"in window)try{e("webworkify")((function(){})).terminate(),this.features.ww=!0;var r="wp_".concat(JSON.stringify(this.options));f[r]?this.__workersPool=f[r]:(this.__workersPool=new a(A,this.options.idle),f[r]=this.__workersPool)}catch(l){}var c,u=this.__mathlib.init().then((function(e){i(t.features,e.features)}));return c=h?s.cib_support().then((function(e){t.features.cib&&n.indexOf("cib")<0?t.debug("createImageBitmap() resize supported, but disabled by config"):n.indexOf("cib")>=0&&(t.features.cib=e)})):Promise.resolve(!1),this.__initPromise=Promise.all([u,c]).then((function(){return t})),this.__initPromise},v.prototype.resize=function(e,t,n){var r=this;this.debug("Start resize...");var o=i({},p);if(isNaN(n)?n&&(o=i(o,n)):o=i(o,{quality:n}),o.toWidth=t.width,o.toHeight=t.height,o.width=e.naturalWidth||e.width,o.height=e.naturalHeight||e.height,0===t.width||0===t.height)return Promise.reject(new Error("Invalid output size: ".concat(t.width,"x").concat(t.height)));o.unsharpRadius>2&&(o.unsharpRadius=2);var a=!1,c=null;o.cancelToken&&(c=o.cancelToken.then((function(e){throw a=!0,e}),(function(e){throw a=!0,e})));var f=Math.ceil(Math.max(3,2.5*o.unsharpRadius|0));return this.init().then((function(){if(a)return c;if(r.features.cib){var n=t.getContext("2d",{alpha:Boolean(o.alpha)});return r.debug("Resize via createImageBitmap()"),createImageBitmap(e,{resizeWidth:o.toWidth,resizeHeight:o.toHeight,resizeQuality:s.cib_quality_name(o.quality)}).then((function(e){if(a)return c;if(!o.unsharpAmount)return n.drawImage(e,0,0),e.close(),n=null,r.debug("Finished!"),t;r.debug("Unsharp result");var i=document.createElement("canvas");i.width=o.toWidth,i.height=o.toHeight;var s=i.getContext("2d",{alpha:Boolean(o.alpha)});s.drawImage(e,0,0),e.close();var u=s.getImageData(0,0,o.toWidth,o.toHeight);return r.__mathlib.unsharp_mask(u.data,o.toWidth,o.toHeight,o.unsharpAmount,o.unsharpRadius,o.unsharpThreshold),n.putImageData(u,0,0),u=s=i=n=null,r.debug("Finished!"),t}))}var g={};return function e(t,n,o,u){if(a)return c;var m,p,A=(2,function(e){if(Array.isArray(e))return e}(p=t.shift())||function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),2!==n.length);i=!0);}catch(c){r=!0,o=c}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(p)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()),v=A[0],y=A[1],w=0===t.length;return u=i({},u,{toWidth:v,toHeight:y,quality:w?u.quality:Math.min(1,u.quality)}),w||((m=document.createElement("canvas")).width=v,m.height=y),function(e,t,n){var i,o,u;return Promise.resolve().then((function(){if(u=t.getContext("2d",{alpha:Boolean(n.alpha)}),s.isCanvas(e))return i=e.getContext("2d",{alpha:Boolean(n.alpha)}),null;if(s.isImage(e))return h?(r.debug("Decode image via createImageBitmap"),createImageBitmap(e).then((function(e){o=e}))):null;throw new Error('".from" should be image or canvas')})).then((function(){if(a)return c;r.debug("Calculate tiles");var h=l({width:n.width,height:n.height,srcTileSize:r.options.tile,toWidth:n.toWidth,toHeight:n.toHeight,destTileBorder:f}).map((function(t){return function(t){return r.__limit((function(){if(a)return c;var l;if(s.isCanvas(e))r.debug("Get tile pixel data"),l=i.getImageData(t.x,t.y,t.width,t.height);else{r.debug("Draw tile imageBitmap/image to temporary canvas");var f=document.createElement("canvas");f.width=t.width,f.height=t.height;var h=f.getContext("2d",{alpha:Boolean(n.alpha)});h.globalCompositeOperation="copy",h.drawImage(o||e,t.x,t.y,t.width,t.height,0,0,t.width,t.height),r.debug("Get tile pixel data"),l=h.getImageData(0,0,t.width,t.height),h=f=null}var m={src:l.data,width:t.width,height:t.height,toWidth:t.toWidth,toHeight:t.toHeight,scaleX:t.scaleX,scaleY:t.scaleY,offsetX:t.offsetX,offsetY:t.offsetY,quality:n.quality,alpha:n.alpha,unsharpAmount:n.unsharpAmount,unsharpRadius:n.unsharpRadius,unsharpThreshold:n.unsharpThreshold};return r.debug("Invoke resize math"),Promise.resolve().then((function(){return function(e){return Promise.resolve().then((function(){return r.features.ww?new Promise((function(t,n){var i=r.__workersPool.acquire();c&&c.catch((function(e){return n(e)})),i.value.onmessage=function(e){i.release(),e.data.err?n(e.data.err):t(e.data.result)},i.value.postMessage({opts:e,features:r.__requested_features,preload:{wasm_nodule:r.__mathlib.__}},[e.src.buffer])})):r.__mathlib.resizeAndUnsharp(e,g)}))}(m)})).then((function(e){if(a)return c;var n;if(l=null,r.debug("Convert raw rgba tile result to ImageData"),b)n=new ImageData(new Uint8ClampedArray(e),t.toWidth,t.toHeight);else if((n=u.createImageData(t.toWidth,t.toHeight)).data.set)n.data.set(e);else for(var i=n.data.length-1;i>=0;i--)n.data[i]=e[i];return r.debug("Draw tile"),d?u.putImageData(n,t.toX,t.toY,t.toInnerX-t.toX,t.toInnerY-t.toY,t.toInnerWidth+1e-5,t.toInnerHeight+1e-5):u.putImageData(n,t.toX,t.toY,t.toInnerX-t.toX,t.toInnerY-t.toY,t.toInnerWidth,t.toInnerHeight),null}))}))}(t)}));function m(){o&&(o.close(),o=null)}return r.debug("Process tiles"),Promise.all(h).then((function(){return r.debug("Finished!"),m(),t}),(function(e){throw m(),e}))}))}(n,w?o:m,u).then((function(){return w?o:(u.width=v,u.height=y,e(t,m,o,u))}))}(u(o.width,o.height,o.toWidth,o.toHeight,r.options.tile,f),e,t,o)}))},v.prototype.resizeBuffer=function(e){var t=this,n=i({},p,e);return this.init().then((function(){return t.__mathlib.resizeAndUnsharp(n)}))},v.prototype.toBlob=function(e,t,n){return t=t||"image/png",new Promise((function(i){if(e.toBlob)e.toBlob((function(e){return i(e)}),t,n);else{for(var r=atob(e.toDataURL(t,n).split(",")[1]),o=r.length,a=new Uint8Array(o),s=0;s<o;s++)a[s]=r.charCodeAt(s);i(new Blob([a],{type:t}))}}))},v.prototype.debug=function(){},t.exports=v},{"./lib/mathlib":1,"./lib/pool":9,"./lib/stepper":10,"./lib/tiler":11,"./lib/utils":12,"./lib/worker":13,"object-assign":24,webworkify:25}]},{},[])("/")}}])}();