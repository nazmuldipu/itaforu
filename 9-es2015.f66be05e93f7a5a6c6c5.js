(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{gMfl:function(e,t,s){"use strict";s.r(t),s.d(t,"ROUTES",(function(){return M})),s.d(t,"UserModule",(function(){return k}));var r=s("tyNb"),o=s("KZX/"),n=s("fXoL");let i=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Gb({type:e,selectors:[["app-add"]],decls:2,vars:0,template:function(e,t){1&e&&(n.Rb(0,"p"),n.xc(1,"add works!"),n.Qb())},styles:[""]}),e})();var c=s("mrSG"),l=s("u6mN"),b=s("/7iW"),a=s("ofXK");function u(e,t){if(1&e&&(n.Rb(0,"span",8),n.xc(1),n.Qb()),2&e){const e=t.$implicit;n.zb(1),n.zc("",e," ")}}function d(e,t){if(1&e){const e=n.Sb();n.Rb(0,"tr"),n.Rb(1,"td"),n.xc(2),n.Qb(),n.Rb(3,"td"),n.xc(4),n.Qb(),n.Rb(5,"td"),n.vc(6,u,2,1,"span",6),n.Qb(),n.Rb(7,"td"),n.Rb(8,"button",7),n.cc("click",(function(){n.rc(e);const s=t.$implicit;return n.ec(2).onEdit(s.id)})),n.xc(9,"Edit"),n.Qb(),n.Qb(),n.Qb()}if(2&e){const e=t.$implicit;n.zb(2),n.yc(e.name),n.zb(2),n.yc(e.email),n.zb(2),n.jc("ngForOf",e.roles)}}function m(e,t){if(1&e&&(n.Rb(0,"table",3),n.Rb(1,"thead"),n.Rb(2,"tr",4),n.Rb(3,"th"),n.xc(4,"Name"),n.Qb(),n.Rb(5,"th"),n.xc(6,"Email"),n.Qb(),n.Rb(7,"th"),n.xc(8,"Roles"),n.Qb(),n.Rb(9,"th"),n.xc(10,"Actions"),n.Qb(),n.Qb(),n.Qb(),n.Rb(11,"tbody"),n.vc(12,d,10,3,"tr",5),n.Qb(),n.Qb()),2&e){const e=n.ec();n.zb(12),n.jc("ngForOf",e.users)}}let h=(()=>{class e{constructor(){this.edit=new n.n}onEdit(e){this.edit.emit(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Gb({type:e,selectors:[["user-list"]],inputs:{users:"users"},outputs:{edit:"edit"},decls:4,vars:1,consts:[[1,"text-center"],[1,"table-responsive"],["class","table table-hover border",4,"ngIf"],[1,"table","table-hover","border"],[1,"table-primary"],[4,"ngFor","ngForOf"],["class","badge badge-primary mr-1",4,"ngFor","ngForOf"],[1,"btn","btn-sm","btn-warning",3,"click"],[1,"badge","badge-primary","mr-1"]],template:function(e,t){1&e&&(n.Rb(0,"h3",0),n.xc(1,"User List"),n.Qb(),n.Rb(2,"div",1),n.vc(3,m,13,1,"table",2),n.Qb()),2&e&&(n.zb(3),n.jc("ngIf",null==t.users?null:t.users.length))},directives:[a.n,a.m],styles:[""]}),e})();var f=s("3Pt+");function p(e,t){1&e&&(n.Rb(0,"small",20),n.xc(1," Name required "),n.Qb())}function R(e,t){if(1&e&&(n.Rb(0,"small",20),n.Rb(1,"div",21),n.xc(2," Email required "),n.Qb(),n.Rb(3,"div",21),n.xc(4,"Invalid email"),n.Qb(),n.Qb()),2&e){const e=n.ec();n.zb(1),n.jc("hidden",!e.form.controls.email.errors.required),n.zb(2),n.jc("hidden",!e.form.controls.email.errors.email)}}function g(e,t){if(1&e&&(n.Rb(0,"small",20),n.Rb(1,"div",21),n.xc(2," Phone number required "),n.Qb(),n.Rb(3,"div",21),n.xc(4," Phone number format 01934953023 "),n.Qb(),n.Qb()),2&e){const e=n.ec();n.zb(1),n.jc("hidden",!e.form.controls.phone.errors.required),n.zb(2),n.jc("hidden",!e.form.controls.phone.errors.pattern)}}function Q(e,t){if(1&e&&(n.Rb(0,"small",20),n.Rb(1,"div",21),n.xc(2," Password required "),n.Qb(),n.Rb(3,"div",21),n.xc(4," Minimum passwor length required 6 "),n.Qb(),n.Qb()),2&e){const e=n.ec();n.zb(1),n.jc("hidden",!e.form.controls.password.errors.required),n.zb(2),n.jc("hidden",!e.form.controls.password.errors.minlength)}}const v=function(e,t,s){return{disabled:e,"btn-warning":t,"btn-success":s}};let x=(()=>{class e{constructor(e){this.fb=e,this.create=new n.n,this.update=new n.n,this.exists=!1,this.showPassword=!1,this.createForm()}ngOnChanges(e){if(this.user&&this.user.id){this.exists=!0;const e=Object.assign({},this.user);this.form.patchValue(e)}}createForm(){this.form=this.fb.group({name:["",[f.t.required,f.t.minLength(5)]],email:["",[f.t.required,f.t.email]],phone:["",[f.t.required,f.t.pattern("^01[3-9][ ]?[0-9]{2}[ ]?[0-9]{3}[ ]?[0-9]{3}$")]],password:["",[f.t.required,f.t.minLength(6)]]})}onClear(){this.form.reset(),this.exists=!1}submit(){this.form.valid&&(this.exists?this.update.emit(this.form.value):this.create.emit(this.form.value),this.exists=!1,this.form.reset())}}return e.\u0275fac=function(t){return new(t||e)(n.Mb(f.d))},e.\u0275cmp=n.Gb({type:e,selectors:[["user-form"]],inputs:{user:"user"},outputs:{create:"create",update:"update"},features:[n.xb],decls:38,vars:19,consts:[[1,"text-center"],[1,"p-3","border",3,"formGroup","ngSubmit"],[1,"form-group","row"],["for","name",1,"col-sm-2","col-form-label"],[1,"col-sm-10"],["type","text","id","name","formControlName","name","autocomplete","no","placeholder","Name",1,"form-control"],["class","text-danger",4,"ngIf"],["for","email",1,"col-sm-2","col-form-label"],["type","email","id","email","formControlName","email","autocomplete","no","placeholder","Email",1,"form-control",3,"readonly"],["for","phone",1,"col-sm-2","col-form-label"],["type","text","id","phone","formControlName","phone","autocomplete","no","placeholder","Phone number","maxlength","11",1,"form-control"],["for","password",1,"col-sm-2","col-form-label"],[1,"input-group","mb-1","mb-sm-0"],["id","password","placeholder","Password","formControlName","password",1,"form-control",3,"type","readonly"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"fa","fa-eye",3,"ngClass"],[1,"d-flex","justify-content-end"],["type","submit",1,"btn","btn-primary","mx-1",3,"ngClass"],[1,"btn","btn-danger","mx-1",3,"click"],[1,"text-danger"],[3,"hidden"]],template:function(e,t){1&e&&(n.Rb(0,"h3",0),n.xc(1),n.Qb(),n.Rb(2,"form",1),n.cc("ngSubmit",(function(){return t.submit()})),n.Rb(3,"div",2),n.Rb(4,"label",3),n.xc(5,"Name"),n.Qb(),n.Rb(6,"div",4),n.Nb(7,"input",5),n.vc(8,p,2,0,"small",6),n.Qb(),n.Qb(),n.Rb(9,"div",2),n.Rb(10,"label",7),n.xc(11,"Email"),n.Qb(),n.Rb(12,"div",4),n.Nb(13,"input",8),n.vc(14,R,5,2,"small",6),n.Qb(),n.Qb(),n.Rb(15,"div",2),n.Rb(16,"label",9),n.xc(17,"Phone"),n.Qb(),n.Rb(18,"div",4),n.Nb(19,"input",10),n.vc(20,g,5,2,"small",6),n.Qb(),n.Qb(),n.Rb(21,"div",2),n.Rb(22,"label",11),n.xc(23,"Password"),n.Qb(),n.Rb(24,"div",4),n.Rb(25,"div",12),n.Nb(26,"input",13),n.Rb(27,"div",14),n.Rb(28,"button",15),n.cc("click",(function(){return t.showPassword=!t.showPassword})),n.Nb(29,"i",16),n.Qb(),n.Qb(),n.Qb(),n.vc(30,Q,5,2,"small",6),n.Qb(),n.Qb(),n.Rb(31,"div",17),n.Rb(32,"button",18),n.xc(33),n.Qb(),n.Rb(34,"button",19),n.cc("click",(function(){return t.onClear()})),n.xc(35,"Clear"),n.Qb(),n.Qb(),n.Qb(),n.xc(36),n.fc(37,"json")),2&e&&(n.zb(1),n.zc("",t.exists?"Edit":"Add"," User"),n.zb(1),n.jc("formGroup",t.form),n.zb(6),n.jc("ngIf",t.form.controls.name.errors&&t.form.controls.name.touched),n.zb(5),n.jc("readonly",t.exists),n.zb(1),n.jc("ngIf",t.form.controls.email.errors&&t.form.controls.email.touched),n.zb(6),n.jc("ngIf",t.form.controls.phone.errors&&t.form.controls.phone.touched),n.zb(6),n.jc("type",t.showPassword?"text":"password")("readonly",t.exists),n.zb(3),n.jc("ngClass",t.showPassword?"fa-eye-slash":"fa-eye"),n.zb(1),n.jc("ngIf",t.form.controls.password.errors&&t.form.controls.password.touched),n.zb(2),n.jc("ngClass",n.oc(15,v,t.form.invalid,t.exists,!t.exists)),n.zb(1),n.zc(" ",t.exists?"Update":"Create"," "),n.zb(3),n.zc(" ",n.gc(37,13,t.user),"\n"))},directives:[f.v,f.n,f.g,f.b,f.m,f.f,a.n,f.j,a.l],pipes:[a.g],styles:[""]}),e})();function w(e,t){if(1&e){const e=n.Sb();n.Rb(0,"div",6),n.Rb(1,"strong"),n.xc(2,"ERROR!"),n.Qb(),n.xc(3),n.Rb(4,"button",7),n.cc("click",(function(){return n.rc(e),n.ec().onCloseErrorMessage()})),n.Rb(5,"span",8),n.xc(6,"\xd7"),n.Qb(),n.Qb(),n.Qb()}if(2&e){const e=n.ec();n.zb(3),n.zc(" ",e.errorMessage," ")}}let y=(()=>{class e{constructor(e,t){this.userService=e,this.auth=t,this.users=[],this.loading=!1,this.errorMessage=""}ngOnInit(){this.userService.users$.subscribe(e=>{this.users=e})}onEdit(e){this.user=this.users.find(t=>t.id==e)}onUpdate(e){return Object(c.a)(this,void 0,void 0,(function*(){this.loading=!0,yield this.userService.update(this.user.id,e).then(e=>{console.log("Updated done",e),this.loading=!1})}))}onCreate(e){console.log("onCreate",e),this.loading=!0,this.auth.register(e.email,e.password).then(t=>{this.auth.saveUserInfoFromForm(t.user.uid,e.name,e.email,e.phone,e.password).then(e=>{this.loading=!1}).catch(e=>{console.log("USER SAVIG ERROR",e),this.errorMessage=e.message,this.loading=!1})}).catch(e=>{console.log("REGISTRATION ERROR",e),this.errorMessage=e.message,this.loading=!1})}onCloseErrorMessage(){this.errorMessage=""}}return e.\u0275fac=function(t){return new(t||e)(n.Mb(b.a),n.Mb(l.a))},e.\u0275cmp=n.Gb({type:e,selectors:[["app-list"]],decls:7,vars:3,consts:[[1,"container-fluid"],["class","alert alert-warning alert-dismissible fade show","role","alert",4,"ngIf"],[1,"row","mx-1"],[1,"col-md-6"],[3,"users","edit"],[3,"user","create","update"],["role","alert",1,"alert","alert-warning","alert-dismissible","fade","show"],["type","button","data-dismiss","alert","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"]],template:function(e,t){1&e&&(n.Rb(0,"div",0),n.vc(1,w,7,1,"div",1),n.Rb(2,"div",2),n.Rb(3,"div",3),n.Rb(4,"user-list",4),n.cc("edit",(function(e){return t.onEdit(e)})),n.Qb(),n.Qb(),n.Rb(5,"div",3),n.Rb(6,"user-form",5),n.cc("create",(function(e){return t.onCreate(e)}))("update",(function(e){return t.onUpdate(e)})),n.Qb(),n.Qb(),n.Qb(),n.Qb()),2&e&&(n.zb(1),n.jc("ngIf",t.errorMessage.length),n.zb(3),n.jc("users",t.users),n.zb(2),n.jc("user",t.user))},directives:[a.n,h,x],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.15rem}"]}),e})();const z=["ADMIN","HR","MODERATOR","EMPLOYEE","USER"];function j(e,t){if(1&e){const e=n.Sb();n.Rb(0,"div",14),n.Rb(1,"input",15),n.cc("change",(function(s){n.rc(e);const r=t.$implicit;return n.ec().onChangeCategory(s.target.checked,r)})),n.Qb(),n.Rb(2,"label",16),n.xc(3),n.Qb(),n.Qb()}if(2&e){const e=t.$implicit,s=n.ec();n.zb(1),n.jc("name",e)("id",e)("checked",s.hasRole(e)),n.zb(1),n.jc("for",e),n.zb(1),n.zc(" ",e," ")}}let C=(()=>{class e{constructor(){this.update=new n.n,this.close=new n.n,this.roles=[],this.userRoles=[],this.exists=!1,this.showPassword=!1,this.roles=z}ngOnChanges(e){this.user&&this.user.id&&(this.userRoles=[...this.user.roles])}hasRole(e){return this.userRoles.includes(e)}onSubmit(){this.userRoles.length||this.userRoles.push("USER");const e=Object.assign(Object.assign({},this.user),{roles:this.userRoles});this.update.emit(e)}onChangeCategory(e,t){e?this.userRoles.push(t):this.userRoles=this.userRoles.filter(e=>e!=t)}onClear(){this.close.emit(!0)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Gb({type:e,selectors:[["role-form"]],inputs:{user:"user"},outputs:{update:"update",close:"close"},features:[n.xb],decls:30,vars:4,consts:[[1,"text-center"],[1,"form-group","row"],["for","name",1,"col-sm-2","col-form-label"],[1,"col-sm-10"],["id","name",1,"form-control"],["for","email",1,"col-sm-2","col-form-label"],["id","email",1,"form-control"],["for","phone",1,"col-sm-2","col-form-label"],["id","phone",1,"form-control"],[1,"col-sm-2"],["class","form-check",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-end"],["type","button",1,"btn","btn-sm","btn-warning","mx-1",3,"click"],["type","button",1,"btn","btn-danger","mx-1",3,"click"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"name","id","checked","change"],[1,"form-check-label",3,"for"]],template:function(e,t){1&e&&(n.Rb(0,"h3",0),n.xc(1,"Update Roles"),n.Qb(),n.Rb(2,"div",1),n.Rb(3,"label",2),n.xc(4,"Name"),n.Qb(),n.Rb(5,"div",3),n.Rb(6,"label",4),n.xc(7),n.Qb(),n.Qb(),n.Qb(),n.Rb(8,"div",1),n.Rb(9,"label",5),n.xc(10,"Email"),n.Qb(),n.Rb(11,"div",3),n.Rb(12,"label",6),n.xc(13),n.Qb(),n.Qb(),n.Qb(),n.Rb(14,"div",1),n.Rb(15,"label",7),n.xc(16,"Phone"),n.Qb(),n.Rb(17,"div",3),n.Rb(18,"label",8),n.xc(19),n.Qb(),n.Qb(),n.Qb(),n.Rb(20,"div",1),n.Rb(21,"div",9),n.xc(22,"Roles"),n.Qb(),n.Rb(23,"div",3),n.vc(24,j,4,5,"div",10),n.Qb(),n.Qb(),n.Rb(25,"div",11),n.Rb(26,"button",12),n.cc("click",(function(){return t.onSubmit()})),n.xc(27," Update "),n.Qb(),n.Rb(28,"button",13),n.cc("click",(function(){return t.onClear()})),n.xc(29,"Clear"),n.Qb(),n.Qb()),2&e&&(n.zb(7),n.yc(t.user.name),n.zb(6),n.yc(t.user.email),n.zb(6),n.yc(t.user.phone),n.zb(5),n.jc("ngForOf",t.roles))},directives:[a.m],styles:[""],changeDetection:0}),e})();function E(e,t){if(1&e){const e=n.Sb();n.Rb(0,"div",6),n.Rb(1,"strong"),n.xc(2,"ERROR!"),n.Qb(),n.xc(3),n.Rb(4,"button",7),n.cc("click",(function(){return n.rc(e),n.ec().onCloseErrorMessage()})),n.Rb(5,"span",8),n.xc(6,"\xd7"),n.Qb(),n.Qb(),n.Qb()}if(2&e){const e=n.ec();n.zb(3),n.zc(" ",e.errorMessage," ")}}function O(e,t){if(1&e){const e=n.Sb();n.Rb(0,"div",3),n.Rb(1,"role-form",9),n.cc("close",(function(t){return n.rc(e),n.ec().onCloseRoleForm(t)}))("update",(function(t){return n.rc(e),n.ec().onUpdate(t)})),n.Qb(),n.Qb()}if(2&e){const e=n.ec();n.zb(1),n.jc("user",e.user)}}const M=[{path:"add",component:i},{path:"roles",component:(()=>{class e{constructor(e){this.userService=e,this.users=[],this.loading=!1,this.errorMessage=""}ngOnInit(){this.userService.users$.subscribe(e=>{this.users=e})}onEdit(e){this.user=this.users.find(t=>t.id==e)}onUpdate(e){return Object(c.a)(this,void 0,void 0,(function*(){this.loading=!0,yield this.userService.update(this.user.id,e).then(e=>{this.loading=!1})}))}onCloseErrorMessage(){this.errorMessage=""}onCloseRoleForm(e){e&&(this.user=null)}}return e.\u0275fac=function(t){return new(t||e)(n.Mb(b.a))},e.\u0275cmp=n.Gb({type:e,selectors:[["app-roles"]],decls:6,vars:3,consts:[[1,"container-fluid"],["class","alert alert-warning alert-dismissible fade show","role","alert",4,"ngIf"],[1,"row","mx-1"],[1,"col-md-6"],[3,"users","edit"],["class","col-md-6",4,"ngIf"],["role","alert",1,"alert","alert-warning","alert-dismissible","fade","show"],["type","button","data-dismiss","alert","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[3,"user","close","update"]],template:function(e,t){1&e&&(n.Rb(0,"div",0),n.vc(1,E,7,1,"div",1),n.Rb(2,"div",2),n.Rb(3,"div",3),n.Rb(4,"user-list",4),n.cc("edit",(function(e){return t.onEdit(e)})),n.Qb(),n.Qb(),n.vc(5,O,2,1,"div",5),n.Qb(),n.Qb()),2&e&&(n.zb(1),n.jc("ngIf",t.errorMessage.length),n.zb(3),n.jc("users",t.users),n.zb(1),n.jc("ngIf",t.user))},directives:[a.n,h,C],styles:[""]}),e})()},{path:"",component:y}];let k=(()=>{class e{}return e.\u0275mod=n.Kb({type:e}),e.\u0275inj=n.Jb({factory:function(t){return new(t||e)},imports:[[o.a,r.e.forChild(M)]]}),e})()}}]);