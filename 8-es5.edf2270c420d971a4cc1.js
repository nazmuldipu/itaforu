!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"==typeof e)return t(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{gMfl:function(t,n,s){"use strict";s.r(n),s.d(n,"ROUTES",(function(){return G})),s.d(n,"UserModule",(function(){return $}));var i,c=s("tyNb"),a=s("KZX/"),l=s("fXoL"),u=((i=function(){function e(){r(this,e)}return o(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||i)},i.\u0275cmp=l.Gb({type:i,selectors:[["app-add"]],decls:2,vars:0,template:function(e,t){1&e&&(l.Rb(0,"p"),l.xc(1,"add works!"),l.Qb())},styles:[""]}),i),b=s("mrSG"),d=s("u6mN"),f=s("/7iW"),m=s("ofXK");function h(e,t){if(1&e&&(l.Rb(0,"span",8),l.xc(1),l.Qb()),2&e){var r=t.$implicit;l.zb(1),l.zc("",r," ")}}function p(e,t){if(1&e){var r=l.Sb();l.Rb(0,"tr"),l.Rb(1,"td"),l.xc(2),l.Qb(),l.Rb(3,"td"),l.xc(4),l.Qb(),l.Rb(5,"td"),l.vc(6,h,2,1,"span",6),l.Qb(),l.Rb(7,"td"),l.Rb(8,"button",7),l.cc("click",(function(){l.rc(r);var e=t.$implicit;return l.ec(2).onEdit(e.id)})),l.xc(9,"Edit"),l.Qb(),l.Qb(),l.Qb()}if(2&e){var n=t.$implicit;l.zb(2),l.yc(n.name),l.zb(2),l.yc(n.email),l.zb(2),l.jc("ngForOf",n.roles)}}function v(e,t){if(1&e&&(l.Rb(0,"table",3),l.Rb(1,"thead"),l.Rb(2,"tr",4),l.Rb(3,"th"),l.xc(4,"Name"),l.Qb(),l.Rb(5,"th"),l.xc(6,"Email"),l.Qb(),l.Rb(7,"th"),l.xc(8,"Roles"),l.Qb(),l.Rb(9,"th"),l.xc(10,"Actions"),l.Qb(),l.Qb(),l.Qb(),l.Rb(11,"tbody"),l.vc(12,p,10,3,"tr",5),l.Qb(),l.Qb()),2&e){var r=l.ec();l.zb(12),l.jc("ngForOf",r.users)}}var R,g=((R=function(){function e(){r(this,e),this.edit=new l.n}return o(e,[{key:"onEdit",value:function(e){this.edit.emit(e)}}]),e}()).\u0275fac=function(e){return new(e||R)},R.\u0275cmp=l.Gb({type:R,selectors:[["user-list"]],inputs:{users:"users"},outputs:{edit:"edit"},decls:4,vars:1,consts:[[1,"text-center"],[1,"table-responsive"],["class","table table-hover border",4,"ngIf"],[1,"table","table-hover","border"],[1,"table-primary"],[4,"ngFor","ngForOf"],["class","badge badge-primary mr-1",4,"ngFor","ngForOf"],[1,"btn","btn-sm","btn-warning",3,"click"],[1,"badge","badge-primary","mr-1"]],template:function(e,t){1&e&&(l.Rb(0,"h3",0),l.xc(1,"User List"),l.Qb(),l.Rb(2,"div",1),l.vc(3,v,13,1,"table",2),l.Qb()),2&e&&(l.zb(3),l.jc("ngIf",null==t.users?null:t.users.length))},directives:[m.n,m.m],styles:[""]}),R),Q=s("3Pt+");function y(e,t){1&e&&(l.Rb(0,"small",20),l.xc(1," Name required "),l.Qb())}function x(e,t){if(1&e&&(l.Rb(0,"small",20),l.Rb(1,"div",21),l.xc(2," Email required "),l.Qb(),l.Rb(3,"div",21),l.xc(4,"Invalid email"),l.Qb(),l.Qb()),2&e){var r=l.ec();l.zb(1),l.jc("hidden",!r.form.controls.email.errors.required),l.zb(2),l.jc("hidden",!r.form.controls.email.errors.email)}}function w(e,t){if(1&e&&(l.Rb(0,"small",20),l.Rb(1,"div",21),l.xc(2," Phone number required "),l.Qb(),l.Rb(3,"div",21),l.xc(4," Phone number format 01934953023 "),l.Qb(),l.Qb()),2&e){var r=l.ec();l.zb(1),l.jc("hidden",!r.form.controls.phone.errors.required),l.zb(2),l.jc("hidden",!r.form.controls.phone.errors.pattern)}}function k(e,t){if(1&e&&(l.Rb(0,"small",20),l.Rb(1,"div",21),l.xc(2," Password required "),l.Qb(),l.Rb(3,"div",21),l.xc(4," Minimum passwor length required 6 "),l.Qb(),l.Qb()),2&e){var r=l.ec();l.zb(1),l.jc("hidden",!r.form.controls.password.errors.required),l.zb(2),l.jc("hidden",!r.form.controls.password.errors.minlength)}}var z,j=function(e,t,r){return{disabled:e,"btn-warning":t,"btn-success":r}},C=((z=function(){function e(t){r(this,e),this.fb=t,this.create=new l.n,this.update=new l.n,this.exists=!1,this.showPassword=!1,this.createForm()}return o(e,[{key:"ngOnChanges",value:function(e){if(this.user&&this.user.id){this.exists=!0;var t=Object.assign({},this.user);this.form.patchValue(t)}}},{key:"createForm",value:function(){this.form=this.fb.group({name:["",[Q.s.required,Q.s.minLength(5)]],email:["",[Q.s.required,Q.s.email]],phone:["",[Q.s.required,Q.s.pattern("^01[3-9][ ]?[0-9]{2}[ ]?[0-9]{3}[ ]?[0-9]{3}$")]],password:["",[Q.s.required,Q.s.minLength(6)]]})}},{key:"onClear",value:function(){this.form.reset(),this.exists=!1}},{key:"submit",value:function(){this.form.valid&&(this.exists?this.update.emit(this.form.value):this.create.emit(this.form.value),this.exists=!1,this.form.reset())}}]),e}()).\u0275fac=function(e){return new(e||z)(l.Mb(Q.d))},z.\u0275cmp=l.Gb({type:z,selectors:[["user-form"]],inputs:{user:"user"},outputs:{create:"create",update:"update"},features:[l.xb],decls:38,vars:19,consts:[[1,"text-center"],[1,"p-3","border",3,"formGroup","ngSubmit"],[1,"form-group","row"],["for","name",1,"col-sm-2","col-form-label"],[1,"col-sm-10"],["type","text","id","name","formControlName","name","autocomplete","no","placeholder","Name",1,"form-control"],["class","text-danger",4,"ngIf"],["for","email",1,"col-sm-2","col-form-label"],["type","email","id","email","formControlName","email","autocomplete","no","placeholder","Email",1,"form-control",3,"readonly"],["for","phone",1,"col-sm-2","col-form-label"],["type","text","id","phone","formControlName","phone","autocomplete","no","placeholder","Phone number","maxlength","11",1,"form-control"],["for","password",1,"col-sm-2","col-form-label"],[1,"input-group","mb-1","mb-sm-0"],["id","password","placeholder","Password","formControlName","password",1,"form-control",3,"type","readonly"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"fa","fa-eye",3,"ngClass"],[1,"d-flex","justify-content-end"],["type","submit",1,"btn","btn-primary","mx-1",3,"ngClass"],[1,"btn","btn-danger","mx-1",3,"click"],[1,"text-danger"],[3,"hidden"]],template:function(e,t){1&e&&(l.Rb(0,"h3",0),l.xc(1),l.Qb(),l.Rb(2,"form",1),l.cc("ngSubmit",(function(){return t.submit()})),l.Rb(3,"div",2),l.Rb(4,"label",3),l.xc(5,"Name"),l.Qb(),l.Rb(6,"div",4),l.Nb(7,"input",5),l.vc(8,y,2,0,"small",6),l.Qb(),l.Qb(),l.Rb(9,"div",2),l.Rb(10,"label",7),l.xc(11,"Email"),l.Qb(),l.Rb(12,"div",4),l.Nb(13,"input",8),l.vc(14,x,5,2,"small",6),l.Qb(),l.Qb(),l.Rb(15,"div",2),l.Rb(16,"label",9),l.xc(17,"Phone"),l.Qb(),l.Rb(18,"div",4),l.Nb(19,"input",10),l.vc(20,w,5,2,"small",6),l.Qb(),l.Qb(),l.Rb(21,"div",2),l.Rb(22,"label",11),l.xc(23,"Password"),l.Qb(),l.Rb(24,"div",4),l.Rb(25,"div",12),l.Nb(26,"input",13),l.Rb(27,"div",14),l.Rb(28,"button",15),l.cc("click",(function(){return t.showPassword=!t.showPassword})),l.Nb(29,"i",16),l.Qb(),l.Qb(),l.Qb(),l.vc(30,k,5,2,"small",6),l.Qb(),l.Qb(),l.Rb(31,"div",17),l.Rb(32,"button",18),l.xc(33),l.Qb(),l.Rb(34,"button",19),l.cc("click",(function(){return t.onClear()})),l.xc(35,"Clear"),l.Qb(),l.Qb(),l.Qb(),l.xc(36),l.fc(37,"json")),2&e&&(l.zb(1),l.zc("",t.exists?"Edit":"Add"," User"),l.zb(1),l.jc("formGroup",t.form),l.zb(6),l.jc("ngIf",t.form.controls.name.errors&&t.form.controls.name.touched),l.zb(5),l.jc("readonly",t.exists),l.zb(1),l.jc("ngIf",t.form.controls.email.errors&&t.form.controls.email.touched),l.zb(6),l.jc("ngIf",t.form.controls.phone.errors&&t.form.controls.phone.touched),l.zb(6),l.jc("type",t.showPassword?"text":"password")("readonly",t.exists),l.zb(3),l.jc("ngClass",t.showPassword?"fa-eye-slash":"fa-eye"),l.zb(1),l.jc("ngIf",t.form.controls.password.errors&&t.form.controls.password.touched),l.zb(2),l.jc("ngClass",l.oc(15,j,t.form.invalid,t.exists,!t.exists)),l.zb(1),l.zc(" ",t.exists?"Update":"Create"," "),l.zb(3),l.zc(" ",l.gc(37,13,t.user),"\n"))},directives:[Q.u,Q.n,Q.g,Q.b,Q.m,Q.f,m.n,Q.j,m.l],pipes:[m.g],styles:[""]}),z);function O(e,t){if(1&e){var r=l.Sb();l.Rb(0,"div",6),l.Rb(1,"strong"),l.xc(2,"ERROR!"),l.Qb(),l.xc(3),l.Rb(4,"button",7),l.cc("click",(function(){return l.rc(r),l.ec().onCloseErrorMessage()})),l.Rb(5,"span",8),l.xc(6,"\xd7"),l.Qb(),l.Qb(),l.Qb()}if(2&e){var n=l.ec();l.zb(3),l.zc(" ",n.errorMessage," ")}}var E,M=((E=function(){function e(t,n){r(this,e),this.userService=t,this.auth=n,this.users=[],this.loading=!1,this.errorMessage=""}return o(e,[{key:"ngOnInit",value:function(){var e=this;this.userService.users$.subscribe((function(t){e.users=t}))}},{key:"onEdit",value:function(e){this.user=this.users.find((function(t){return t.id==e}))}},{key:"onUpdate",value:function(e){return Object(b.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,this.userService.update(this.user.id,e).then((function(e){console.log("Updated done",e),r.loading=!1}));case 3:case"end":return t.stop()}}),t,this)})))}},{key:"onCreate",value:function(e){var t=this;console.log("onCreate",e),this.loading=!0,this.auth.register(e.email,e.password).then((function(r){t.auth.saveUserInfoFromForm(r.user.uid,e.name,e.email,e.phone,e.password).then((function(e){t.loading=!1})).catch((function(e){console.log("USER SAVIG ERROR",e),t.errorMessage=e.message,t.loading=!1}))})).catch((function(e){console.log("REGISTRATION ERROR",e),t.errorMessage=e.message,t.loading=!1}))}},{key:"onCloseErrorMessage",value:function(){this.errorMessage=""}}]),e}()).\u0275fac=function(e){return new(e||E)(l.Mb(f.a),l.Mb(d.a))},E.\u0275cmp=l.Gb({type:E,selectors:[["app-list"]],decls:7,vars:3,consts:[[1,"container-fluid"],["class","alert alert-warning alert-dismissible fade show","role","alert",4,"ngIf"],[1,"row","mx-1"],[1,"col-md-6"],[3,"users","edit"],[3,"user","create","update"],["role","alert",1,"alert","alert-warning","alert-dismissible","fade","show"],["type","button","data-dismiss","alert","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"]],template:function(e,t){1&e&&(l.Rb(0,"div",0),l.vc(1,O,7,1,"div",1),l.Rb(2,"div",2),l.Rb(3,"div",3),l.Rb(4,"user-list",4),l.cc("edit",(function(e){return t.onEdit(e)})),l.Qb(),l.Qb(),l.Rb(5,"div",3),l.Rb(6,"user-form",5),l.cc("create",(function(e){return t.onCreate(e)}))("update",(function(e){return t.onUpdate(e)})),l.Qb(),l.Qb(),l.Qb(),l.Qb()),2&e&&(l.zb(1),l.jc("ngIf",t.errorMessage.length),l.zb(3),l.jc("users",t.users),l.zb(2),l.jc("user",t.user))},directives:[m.n,g,C],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.15rem}"]}),E),S=["ADMIN","HR","MODERATOR","EMPLOYEE","USER"];function I(e,t){if(1&e){var r=l.Sb();l.Rb(0,"div",14),l.Rb(1,"input",15),l.cc("change",(function(e){l.rc(r);var n=t.$implicit;return l.ec().onChangeCategory(e.target.checked,n)})),l.Qb(),l.Rb(2,"label",16),l.xc(3),l.Qb(),l.Qb()}if(2&e){var n=t.$implicit,o=l.ec();l.zb(1),l.jc("name",n)("id",n)("checked",o.hasRole(n)),l.zb(1),l.jc("for",n),l.zb(1),l.zc(" ",n," ")}}var P,N=((P=function(){function t(){r(this,t),this.update=new l.n,this.close=new l.n,this.roles=[],this.userRoles=[],this.exists=!1,this.showPassword=!1,this.roles=S}return o(t,[{key:"ngOnChanges",value:function(t){this.user&&this.user.id&&(this.userRoles=e(this.user.roles))}},{key:"hasRole",value:function(e){return this.userRoles.includes(e)}},{key:"onSubmit",value:function(){this.userRoles.length||this.userRoles.push("USER");var e=Object.assign(Object.assign({},this.user),{roles:this.userRoles});this.update.emit(e)}},{key:"onChangeCategory",value:function(e,t){e?this.userRoles.push(t):this.userRoles=this.userRoles.filter((function(e){return e!=t}))}},{key:"onClear",value:function(){this.close.emit(!0)}}]),t}()).\u0275fac=function(e){return new(e||P)},P.\u0275cmp=l.Gb({type:P,selectors:[["role-form"]],inputs:{user:"user"},outputs:{update:"update",close:"close"},features:[l.xb],decls:30,vars:4,consts:[[1,"text-center"],[1,"form-group","row"],["for","name",1,"col-sm-2","col-form-label"],[1,"col-sm-10"],["id","name",1,"form-control"],["for","email",1,"col-sm-2","col-form-label"],["id","email",1,"form-control"],["for","phone",1,"col-sm-2","col-form-label"],["id","phone",1,"form-control"],[1,"col-sm-2"],["class","form-check",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-end"],["type","button",1,"btn","btn-sm","btn-warning","mx-1",3,"click"],["type","button",1,"btn","btn-danger","mx-1",3,"click"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"name","id","checked","change"],[1,"form-check-label",3,"for"]],template:function(e,t){1&e&&(l.Rb(0,"h3",0),l.xc(1,"Update Roles"),l.Qb(),l.Rb(2,"div",1),l.Rb(3,"label",2),l.xc(4,"Name"),l.Qb(),l.Rb(5,"div",3),l.Rb(6,"label",4),l.xc(7),l.Qb(),l.Qb(),l.Qb(),l.Rb(8,"div",1),l.Rb(9,"label",5),l.xc(10,"Email"),l.Qb(),l.Rb(11,"div",3),l.Rb(12,"label",6),l.xc(13),l.Qb(),l.Qb(),l.Qb(),l.Rb(14,"div",1),l.Rb(15,"label",7),l.xc(16,"Phone"),l.Qb(),l.Rb(17,"div",3),l.Rb(18,"label",8),l.xc(19),l.Qb(),l.Qb(),l.Qb(),l.Rb(20,"div",1),l.Rb(21,"div",9),l.xc(22,"Roles"),l.Qb(),l.Rb(23,"div",3),l.vc(24,I,4,5,"div",10),l.Qb(),l.Qb(),l.Rb(25,"div",11),l.Rb(26,"button",12),l.cc("click",(function(){return t.onSubmit()})),l.xc(27," Update "),l.Qb(),l.Rb(28,"button",13),l.cc("click",(function(){return t.onClear()})),l.xc(29,"Clear"),l.Qb(),l.Qb()),2&e&&(l.zb(7),l.yc(t.user.name),l.zb(6),l.yc(t.user.email),l.zb(6),l.yc(t.user.phone),l.zb(5),l.jc("ngForOf",t.roles))},directives:[m.m],styles:[""],changeDetection:0}),P);function U(e,t){if(1&e){var r=l.Sb();l.Rb(0,"div",6),l.Rb(1,"strong"),l.xc(2,"ERROR!"),l.Qb(),l.xc(3),l.Rb(4,"button",7),l.cc("click",(function(){return l.rc(r),l.ec().onCloseErrorMessage()})),l.Rb(5,"span",8),l.xc(6,"\xd7"),l.Qb(),l.Qb(),l.Qb()}if(2&e){var n=l.ec();l.zb(3),l.zc(" ",n.errorMessage," ")}}function F(e,t){if(1&e){var r=l.Sb();l.Rb(0,"div",3),l.Rb(1,"role-form",9),l.cc("close",(function(e){return l.rc(r),l.ec().onCloseRoleForm(e)}))("update",(function(e){return l.rc(r),l.ec().onUpdate(e)})),l.Qb(),l.Qb()}if(2&e){var n=l.ec();l.zb(1),l.jc("user",n.user)}}var A,q,G=[{path:"add",component:u},{path:"roles",component:(A=function(){function e(t){r(this,e),this.userService=t,this.users=[],this.loading=!1,this.errorMessage=""}return o(e,[{key:"ngOnInit",value:function(){var e=this;this.userService.users$.subscribe((function(t){e.users=t}))}},{key:"onEdit",value:function(e){this.user=this.users.find((function(t){return t.id==e}))}},{key:"onUpdate",value:function(e){return Object(b.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,this.userService.update(this.user.id,e).then((function(e){r.loading=!1}));case 3:case"end":return t.stop()}}),t,this)})))}},{key:"onCloseErrorMessage",value:function(){this.errorMessage=""}},{key:"onCloseRoleForm",value:function(e){e&&(this.user=null)}}]),e}(),A.\u0275fac=function(e){return new(e||A)(l.Mb(f.a))},A.\u0275cmp=l.Gb({type:A,selectors:[["app-roles"]],decls:6,vars:3,consts:[[1,"container-fluid"],["class","alert alert-warning alert-dismissible fade show","role","alert",4,"ngIf"],[1,"row","mx-1"],[1,"col-md-6"],[3,"users","edit"],["class","col-md-6",4,"ngIf"],["role","alert",1,"alert","alert-warning","alert-dismissible","fade","show"],["type","button","data-dismiss","alert","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[3,"user","close","update"]],template:function(e,t){1&e&&(l.Rb(0,"div",0),l.vc(1,U,7,1,"div",1),l.Rb(2,"div",2),l.Rb(3,"div",3),l.Rb(4,"user-list",4),l.cc("edit",(function(e){return t.onEdit(e)})),l.Qb(),l.Qb(),l.vc(5,F,2,1,"div",5),l.Qb(),l.Qb()),2&e&&(l.zb(1),l.jc("ngIf",t.errorMessage.length),l.zb(3),l.jc("users",t.users),l.zb(1),l.jc("ngIf",t.user))},directives:[m.n,g,N],styles:[""]}),A)},{path:"",component:M}],$=((q=function e(){r(this,e)}).\u0275mod=l.Kb({type:q}),q.\u0275inj=l.Jb({factory:function(e){return new(e||q)},imports:[[a.a,c.d.forChild(G)]]}),q)}}])}();